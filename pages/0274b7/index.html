<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>服务熔断和限流 | 沉梦听雨的编程指南</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="https://cmty256.github.io/imgs-blog/logo/白云.38zbldnhh180.jpg">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3077305_pt8umhrn4k9.css">
    <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?04a2517feeaf9f0d4d507cee97057d7c";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
            })();
          </script>
    <meta name="description" content="满招损，谦受益">
    <meta name="keywords" content="编程分享, 开发, 程序员, Java, 计算机, IT, 八股">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.346c239d.css" as="style"><link rel="preload" href="/assets/js/app.81da6fd4.js" as="script"><link rel="preload" href="/assets/js/2.44c2282a.js" as="script"><link rel="preload" href="/assets/js/149.469f0fb8.js" as="script"><link rel="preload" href="/assets/js/6.733ffa2a.js" as="script"><link rel="prefetch" href="/assets/js/10.df858a99.js"><link rel="prefetch" href="/assets/js/100.06c5d7a4.js"><link rel="prefetch" href="/assets/js/101.681b6442.js"><link rel="prefetch" href="/assets/js/102.8093e35d.js"><link rel="prefetch" href="/assets/js/103.d89c7a81.js"><link rel="prefetch" href="/assets/js/104.aa9809ec.js"><link rel="prefetch" href="/assets/js/105.923cd2ec.js"><link rel="prefetch" href="/assets/js/106.d34f9084.js"><link rel="prefetch" href="/assets/js/107.f01daf69.js"><link rel="prefetch" href="/assets/js/108.82186030.js"><link rel="prefetch" href="/assets/js/109.98682039.js"><link rel="prefetch" href="/assets/js/11.d91084ad.js"><link rel="prefetch" href="/assets/js/110.b705251b.js"><link rel="prefetch" href="/assets/js/111.5973128d.js"><link rel="prefetch" href="/assets/js/112.30e29f25.js"><link rel="prefetch" href="/assets/js/113.2368f7b7.js"><link rel="prefetch" href="/assets/js/114.acaecc01.js"><link rel="prefetch" href="/assets/js/115.5ddc690f.js"><link rel="prefetch" href="/assets/js/116.5b63e2cc.js"><link rel="prefetch" href="/assets/js/117.7d8f3380.js"><link rel="prefetch" href="/assets/js/118.7eb1202a.js"><link rel="prefetch" href="/assets/js/119.cd9e3200.js"><link rel="prefetch" href="/assets/js/12.e9805c5b.js"><link rel="prefetch" href="/assets/js/120.f3d78e43.js"><link rel="prefetch" href="/assets/js/121.0058c525.js"><link rel="prefetch" href="/assets/js/122.fe7f3895.js"><link rel="prefetch" href="/assets/js/123.41f944e4.js"><link rel="prefetch" href="/assets/js/124.d3ced985.js"><link rel="prefetch" href="/assets/js/125.fcf72fb4.js"><link rel="prefetch" href="/assets/js/126.a89d7b69.js"><link rel="prefetch" href="/assets/js/127.35f41aca.js"><link rel="prefetch" href="/assets/js/128.95f4311e.js"><link rel="prefetch" href="/assets/js/129.2b780926.js"><link rel="prefetch" href="/assets/js/13.48208c08.js"><link rel="prefetch" href="/assets/js/130.3d22be5e.js"><link rel="prefetch" href="/assets/js/131.419425ce.js"><link rel="prefetch" href="/assets/js/132.b66bd75d.js"><link rel="prefetch" href="/assets/js/133.93638d81.js"><link rel="prefetch" href="/assets/js/134.ea3a90cb.js"><link rel="prefetch" href="/assets/js/135.d79fa934.js"><link rel="prefetch" href="/assets/js/136.e978c948.js"><link rel="prefetch" href="/assets/js/137.0f7f196f.js"><link rel="prefetch" href="/assets/js/138.f6bb2b8d.js"><link rel="prefetch" href="/assets/js/139.5be3dbe8.js"><link rel="prefetch" href="/assets/js/14.6a15ec49.js"><link rel="prefetch" href="/assets/js/140.9dc0a9c8.js"><link rel="prefetch" href="/assets/js/141.6ec21577.js"><link rel="prefetch" href="/assets/js/142.250334a5.js"><link rel="prefetch" href="/assets/js/143.4a41e152.js"><link rel="prefetch" href="/assets/js/144.fb718a0b.js"><link rel="prefetch" href="/assets/js/145.5711e919.js"><link rel="prefetch" href="/assets/js/146.b187090c.js"><link rel="prefetch" href="/assets/js/147.23b81a0f.js"><link rel="prefetch" href="/assets/js/148.e58beb6b.js"><link rel="prefetch" href="/assets/js/15.fcf61f21.js"><link rel="prefetch" href="/assets/js/150.a57e9b4a.js"><link rel="prefetch" href="/assets/js/151.eca02484.js"><link rel="prefetch" href="/assets/js/152.06c6dd8f.js"><link rel="prefetch" href="/assets/js/153.e00207f1.js"><link rel="prefetch" href="/assets/js/154.ce5803d2.js"><link rel="prefetch" href="/assets/js/155.fa4f0d19.js"><link rel="prefetch" href="/assets/js/156.1ce60e49.js"><link rel="prefetch" href="/assets/js/157.267b125e.js"><link rel="prefetch" href="/assets/js/158.3b544459.js"><link rel="prefetch" href="/assets/js/159.6db20a0f.js"><link rel="prefetch" href="/assets/js/16.dfaf4748.js"><link rel="prefetch" href="/assets/js/160.871337ad.js"><link rel="prefetch" href="/assets/js/161.1bf0fd08.js"><link rel="prefetch" href="/assets/js/162.99e627c4.js"><link rel="prefetch" href="/assets/js/163.79d1e73a.js"><link rel="prefetch" href="/assets/js/164.36345cd7.js"><link rel="prefetch" href="/assets/js/165.0ff620fe.js"><link rel="prefetch" href="/assets/js/166.8ba53c78.js"><link rel="prefetch" href="/assets/js/167.15489fff.js"><link rel="prefetch" href="/assets/js/168.a03a09ca.js"><link rel="prefetch" href="/assets/js/169.c763a283.js"><link rel="prefetch" href="/assets/js/17.fab10051.js"><link rel="prefetch" href="/assets/js/170.e18ef325.js"><link rel="prefetch" href="/assets/js/171.bfb950b6.js"><link rel="prefetch" href="/assets/js/172.a8088f82.js"><link rel="prefetch" href="/assets/js/173.50f0bc58.js"><link rel="prefetch" href="/assets/js/174.67981ea8.js"><link rel="prefetch" href="/assets/js/175.41a0ee9a.js"><link rel="prefetch" href="/assets/js/176.1755e2e9.js"><link rel="prefetch" href="/assets/js/177.ab3c2420.js"><link rel="prefetch" href="/assets/js/178.03e9fd69.js"><link rel="prefetch" href="/assets/js/179.9672608f.js"><link rel="prefetch" href="/assets/js/18.79c5b9b1.js"><link rel="prefetch" href="/assets/js/180.1228d2bc.js"><link rel="prefetch" href="/assets/js/181.cd7ade92.js"><link rel="prefetch" href="/assets/js/182.f14db740.js"><link rel="prefetch" href="/assets/js/183.a94d6812.js"><link rel="prefetch" href="/assets/js/184.58753ee0.js"><link rel="prefetch" href="/assets/js/185.dfc6d6fd.js"><link rel="prefetch" href="/assets/js/186.7a817e0d.js"><link rel="prefetch" href="/assets/js/187.868bab00.js"><link rel="prefetch" href="/assets/js/188.8ee14978.js"><link rel="prefetch" href="/assets/js/189.42ba5c1c.js"><link rel="prefetch" href="/assets/js/19.9bf9ec73.js"><link rel="prefetch" href="/assets/js/190.bc705a01.js"><link rel="prefetch" href="/assets/js/191.5ec0f035.js"><link rel="prefetch" href="/assets/js/192.847b887b.js"><link rel="prefetch" href="/assets/js/193.b5e4ef02.js"><link rel="prefetch" href="/assets/js/194.0f87d5ac.js"><link rel="prefetch" href="/assets/js/195.b84f8f90.js"><link rel="prefetch" href="/assets/js/196.7c688f46.js"><link rel="prefetch" href="/assets/js/197.0b6da9c7.js"><link rel="prefetch" href="/assets/js/198.2e6f0dfa.js"><link rel="prefetch" href="/assets/js/199.c81be11f.js"><link rel="prefetch" href="/assets/js/20.d71d0fa5.js"><link rel="prefetch" href="/assets/js/200.638ab4c6.js"><link rel="prefetch" href="/assets/js/201.3bb8d007.js"><link rel="prefetch" href="/assets/js/202.ddfb049a.js"><link rel="prefetch" href="/assets/js/203.ccf236ef.js"><link rel="prefetch" href="/assets/js/204.5f23969e.js"><link rel="prefetch" href="/assets/js/205.4685fffc.js"><link rel="prefetch" href="/assets/js/206.f11ea600.js"><link rel="prefetch" href="/assets/js/207.505ca63c.js"><link rel="prefetch" href="/assets/js/208.287ca763.js"><link rel="prefetch" href="/assets/js/209.caf8c814.js"><link rel="prefetch" href="/assets/js/21.5b0aef3c.js"><link rel="prefetch" href="/assets/js/210.7ac615b8.js"><link rel="prefetch" href="/assets/js/211.5f3268ea.js"><link rel="prefetch" href="/assets/js/212.5ab39d94.js"><link rel="prefetch" href="/assets/js/213.e87fff2c.js"><link rel="prefetch" href="/assets/js/214.139792f1.js"><link rel="prefetch" href="/assets/js/215.8f524f85.js"><link rel="prefetch" href="/assets/js/216.f6273772.js"><link rel="prefetch" href="/assets/js/217.cf4be394.js"><link rel="prefetch" href="/assets/js/218.ce8e5042.js"><link rel="prefetch" href="/assets/js/219.d6af4a65.js"><link rel="prefetch" href="/assets/js/22.daab4dd3.js"><link rel="prefetch" href="/assets/js/220.fed71ed8.js"><link rel="prefetch" href="/assets/js/221.4165d2e6.js"><link rel="prefetch" href="/assets/js/222.65cc4e63.js"><link rel="prefetch" href="/assets/js/223.d73e19af.js"><link rel="prefetch" href="/assets/js/224.79a812a9.js"><link rel="prefetch" href="/assets/js/225.a1cdc857.js"><link rel="prefetch" href="/assets/js/226.58ab6e7c.js"><link rel="prefetch" href="/assets/js/227.5ef8daae.js"><link rel="prefetch" href="/assets/js/228.6ce014b6.js"><link rel="prefetch" href="/assets/js/229.2cc25651.js"><link rel="prefetch" href="/assets/js/23.d452392c.js"><link rel="prefetch" href="/assets/js/230.fdf0599b.js"><link rel="prefetch" href="/assets/js/231.e055f677.js"><link rel="prefetch" href="/assets/js/232.0b89e17f.js"><link rel="prefetch" href="/assets/js/233.d8d58229.js"><link rel="prefetch" href="/assets/js/234.e25df064.js"><link rel="prefetch" href="/assets/js/235.a855d0c8.js"><link rel="prefetch" href="/assets/js/236.db03af3c.js"><link rel="prefetch" href="/assets/js/237.cc562cc0.js"><link rel="prefetch" href="/assets/js/238.cb9ca0c9.js"><link rel="prefetch" href="/assets/js/239.14ad9bcf.js"><link rel="prefetch" href="/assets/js/24.bcce9dd0.js"><link rel="prefetch" href="/assets/js/240.6537adb2.js"><link rel="prefetch" href="/assets/js/241.9592f44c.js"><link rel="prefetch" href="/assets/js/242.abe3cf36.js"><link rel="prefetch" href="/assets/js/243.65c70493.js"><link rel="prefetch" href="/assets/js/244.067fdc33.js"><link rel="prefetch" href="/assets/js/245.2c455a0d.js"><link rel="prefetch" href="/assets/js/246.39edfc4f.js"><link rel="prefetch" href="/assets/js/247.91409fac.js"><link rel="prefetch" href="/assets/js/248.52f1e3b5.js"><link rel="prefetch" href="/assets/js/249.7bc7a364.js"><link rel="prefetch" href="/assets/js/25.578d7697.js"><link rel="prefetch" href="/assets/js/26.2ad52586.js"><link rel="prefetch" href="/assets/js/27.f21643e6.js"><link rel="prefetch" href="/assets/js/28.ec30bbfe.js"><link rel="prefetch" href="/assets/js/29.9ff56b8f.js"><link rel="prefetch" href="/assets/js/3.4c90862f.js"><link rel="prefetch" href="/assets/js/30.fc4ffd11.js"><link rel="prefetch" href="/assets/js/31.da94bafc.js"><link rel="prefetch" href="/assets/js/32.51d4f6ac.js"><link rel="prefetch" href="/assets/js/33.7331840e.js"><link rel="prefetch" href="/assets/js/34.b20c4a89.js"><link rel="prefetch" href="/assets/js/35.885396dc.js"><link rel="prefetch" href="/assets/js/36.6e9e59bd.js"><link rel="prefetch" href="/assets/js/37.f2724365.js"><link rel="prefetch" href="/assets/js/38.10746b01.js"><link rel="prefetch" href="/assets/js/39.82d862b1.js"><link rel="prefetch" href="/assets/js/4.76cdfaa1.js"><link rel="prefetch" href="/assets/js/40.ef71cac7.js"><link rel="prefetch" href="/assets/js/41.52ac87e3.js"><link rel="prefetch" href="/assets/js/42.c3bd9b82.js"><link rel="prefetch" href="/assets/js/43.0d038f10.js"><link rel="prefetch" href="/assets/js/44.07585c34.js"><link rel="prefetch" href="/assets/js/45.138891bd.js"><link rel="prefetch" href="/assets/js/46.b8dd999e.js"><link rel="prefetch" href="/assets/js/47.04ca38d6.js"><link rel="prefetch" href="/assets/js/48.5a371396.js"><link rel="prefetch" href="/assets/js/49.883ffa9b.js"><link rel="prefetch" href="/assets/js/5.b07b7217.js"><link rel="prefetch" href="/assets/js/50.ba90a6a4.js"><link rel="prefetch" href="/assets/js/51.37d9585b.js"><link rel="prefetch" href="/assets/js/52.40973cf0.js"><link rel="prefetch" href="/assets/js/53.b07a1c51.js"><link rel="prefetch" href="/assets/js/54.a600a1f5.js"><link rel="prefetch" href="/assets/js/55.1b635544.js"><link rel="prefetch" href="/assets/js/56.81ea380f.js"><link rel="prefetch" href="/assets/js/57.f0434b99.js"><link rel="prefetch" href="/assets/js/58.6dbe8810.js"><link rel="prefetch" href="/assets/js/59.19fbc854.js"><link rel="prefetch" href="/assets/js/60.55b6a2fc.js"><link rel="prefetch" href="/assets/js/61.66e29093.js"><link rel="prefetch" href="/assets/js/62.5f659b18.js"><link rel="prefetch" href="/assets/js/63.15b53c6f.js"><link rel="prefetch" href="/assets/js/64.9beb1446.js"><link rel="prefetch" href="/assets/js/65.9ba68af4.js"><link rel="prefetch" href="/assets/js/66.c4b8bdb9.js"><link rel="prefetch" href="/assets/js/67.c3842d44.js"><link rel="prefetch" href="/assets/js/68.44f9e928.js"><link rel="prefetch" href="/assets/js/69.d0b1fc48.js"><link rel="prefetch" href="/assets/js/7.c6b92d69.js"><link rel="prefetch" href="/assets/js/70.7af93ca8.js"><link rel="prefetch" href="/assets/js/71.e1c6f3bc.js"><link rel="prefetch" href="/assets/js/72.243e8018.js"><link rel="prefetch" href="/assets/js/73.3e252dd3.js"><link rel="prefetch" href="/assets/js/74.4efbd700.js"><link rel="prefetch" href="/assets/js/75.042213c4.js"><link rel="prefetch" href="/assets/js/76.7ae43010.js"><link rel="prefetch" href="/assets/js/77.c1d1587a.js"><link rel="prefetch" href="/assets/js/78.eee7d39b.js"><link rel="prefetch" href="/assets/js/79.ace16e7a.js"><link rel="prefetch" href="/assets/js/8.821c7fc2.js"><link rel="prefetch" href="/assets/js/80.47755e19.js"><link rel="prefetch" href="/assets/js/81.756a71d3.js"><link rel="prefetch" href="/assets/js/82.7b9abee9.js"><link rel="prefetch" href="/assets/js/83.ec430ad5.js"><link rel="prefetch" href="/assets/js/84.b4e82fbc.js"><link rel="prefetch" href="/assets/js/85.23192c1c.js"><link rel="prefetch" href="/assets/js/86.9b40a015.js"><link rel="prefetch" href="/assets/js/87.a0a8a9f4.js"><link rel="prefetch" href="/assets/js/88.0c261436.js"><link rel="prefetch" href="/assets/js/89.5f4ff675.js"><link rel="prefetch" href="/assets/js/9.cbbce9b9.js"><link rel="prefetch" href="/assets/js/90.597e30a9.js"><link rel="prefetch" href="/assets/js/91.32f5934e.js"><link rel="prefetch" href="/assets/js/92.346f2f7b.js"><link rel="prefetch" href="/assets/js/93.947e67fd.js"><link rel="prefetch" href="/assets/js/94.294d2749.js"><link rel="prefetch" href="/assets/js/95.4cf1d4fc.js"><link rel="prefetch" href="/assets/js/96.2547f5d3.js"><link rel="prefetch" href="/assets/js/97.a3dcae64.js"><link rel="prefetch" href="/assets/js/98.a704f27e.js"><link rel="prefetch" href="/assets/js/99.c5cf9112.js">
    <link rel="stylesheet" href="/assets/css/0.styles.346c239d.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://cmty256.github.io/imgs-blog/logo/白云.38zbldnhh180.jpg" alt="沉梦听雨的编程指南" class="logo"> <span class="site-name can-hide">沉梦听雨的编程指南</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/11aacc/" class="nav-link">基础篇</a></li><li class="dropdown-item"><!----> <a href="/pages/2e780e/" class="nav-link">集合篇</a></li><li class="dropdown-item"><!----> <a href="/pages/846d88/" class="nav-link">并发篇</a></li><li class="dropdown-item"><!----> <a href="/pages/562a37/" class="nav-link">JVM</a></li><li class="dropdown-item"><!----> <a href="/pages/a5d9a6/" class="nav-link">Java8 新特性</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><!----> <span class="title" style="display:;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/7b1cb2/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/pages/6048a8/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/pages/3b34ba/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/efa3f2/" class="nav-link">基础篇</a></li><li class="dropdown-item"><!----> <a href="/pages/ccc445/" class="nav-link">MySql</a></li><li class="dropdown-item"><!----> <a href="/pages/54616e/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/980c9c/" class="nav-link">达梦</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用框架" class="dropdown-title"><!----> <span class="title" style="display:;">常用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/4969e6/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/pages/72bcc7/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/pages/93b888/" class="nav-link">Mybatis</a></li><li class="dropdown-item"><!----> <a href="/pages/a54fbc/" class="nav-link">Shiro</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="系统设计" class="dropdown-title"><!----> <span class="title" style="display:;">系统设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/649916/" class="nav-link">设计须知</a></li><li class="dropdown-item"><!----> <a href="/pages/3fcc71/" class="nav-link">UML画图</a></li><li class="dropdown-item"><!----> <a href="/pages/793d0a/" class="nav-link">权限校验</a></li><li class="dropdown-item"><!----> <a href="/pages/6ea7eb/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务" class="dropdown-title"><!----> <span class="title" style="display:;">微服务</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/c6222f/" class="nav-link">API网关</a></li><li class="dropdown-item"><!----> <a href="/pages//" class="nav-link">RPC</a></li><li class="dropdown-item"><!----> <a href="/pages/2f66e5/" class="nav-link">消息队列</a></li><li class="dropdown-item"><!----> <a href="/pages/75e0cf/" class="nav-link">SpringCloud</a></li><li class="dropdown-item"><!----> <a href="/pages/957695/" class="nav-link">分布式事务</a></li><li class="dropdown-item"><!----> <a href="/pages/2beec7/" class="nav-link">云存储</a></li><li class="dropdown-item"><!----> <a href="/pages/412fe7/" class="nav-link">虚拟机</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发日常" class="dropdown-title"><!----> <span class="title" style="display:;">开发日常</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/626493/" class="nav-link">开发工具篇</a></li><li class="dropdown-item"><!----> <a href="/pages/bdbd1f/" class="nav-link">工具库篇</a></li><li class="dropdown-item"><!----> <a href="/pages/cc202d/" class="nav-link">开发技巧篇</a></li><li class="dropdown-item"><!----> <a href="/pages/dea09d/" class="nav-link">工具类系列</a></li><li class="dropdown-item"><!----> <a href="/pages/3cd6be/" class="nav-link">随笔</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习" class="dropdown-title"><!----> <span class="title" style="display:;">前端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/99897f/" class="nav-link">HTML与CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/51542d/" class="nav-link">JS学习</a></li><li class="dropdown-item"><!----> <a href="/pages/803f9d/" class="nav-link">Vue3入门</a></li><li class="dropdown-item"><!----> <a href="/pages/ca4cfb/" class="nav-link">Vue3进阶</a></li><li class="dropdown-item"><!----> <a href="/pages/50e8d3/" class="nav-link">黑马Vue3</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目笔记" class="dropdown-title"><!----> <span class="title" style="display:;">项目笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/ebb9f9/" class="nav-link">脚手架搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/fbc2fc/" class="nav-link">瑞吉外卖</a></li><li class="dropdown-item"><!----> <a href="/pages/ee76ba/" class="nav-link">黑马点评</a></li><li class="dropdown-item"><!----> <a href="/pages/fa01b6/" class="nav-link">vue-blog</a></li><li class="dropdown-item"><!----> <a href="/pages/b363e2/" class="nav-link">沉梦接口开放平台</a></li><li class="dropdown-item"><!----> <a href="/pages/72b962/" class="nav-link">用户中心</a></li><li class="dropdown-item"><!----> <a href="/pages/8baa93/" class="nav-link">聚合搜索平台</a></li><li class="dropdown-item"><!----> <a href="/pages/a6b2f3/" class="nav-link">仿12306项目</a></li><li class="dropdown-item"><!----> <a href="/pages/a2c11e/" class="nav-link">RuoYi-Vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><!----> <span class="title" style="display:;">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/fa256e/" class="nav-link">博客搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/335531/" class="nav-link">网站收藏箱</a></li><li class="dropdown-item"><!----> <a href="/pages/94109b/" class="nav-link">断墨寻径摘录</a></li><li class="dropdown-item"><!----> <a href="/pages/22f2c8/" class="nav-link">费曼学习法</a></li></ul></div></div> <a href="https://github.com/cmty256" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/11aacc/" class="nav-link">基础篇</a></li><li class="dropdown-item"><!----> <a href="/pages/2e780e/" class="nav-link">集合篇</a></li><li class="dropdown-item"><!----> <a href="/pages/846d88/" class="nav-link">并发篇</a></li><li class="dropdown-item"><!----> <a href="/pages/562a37/" class="nav-link">JVM</a></li><li class="dropdown-item"><!----> <a href="/pages/a5d9a6/" class="nav-link">Java8 新特性</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><!----> <span class="title" style="display:;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/7b1cb2/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/pages/6048a8/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/pages/3b34ba/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/efa3f2/" class="nav-link">基础篇</a></li><li class="dropdown-item"><!----> <a href="/pages/ccc445/" class="nav-link">MySql</a></li><li class="dropdown-item"><!----> <a href="/pages/54616e/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/980c9c/" class="nav-link">达梦</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用框架" class="dropdown-title"><!----> <span class="title" style="display:;">常用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/4969e6/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/pages/72bcc7/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/pages/93b888/" class="nav-link">Mybatis</a></li><li class="dropdown-item"><!----> <a href="/pages/a54fbc/" class="nav-link">Shiro</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="系统设计" class="dropdown-title"><!----> <span class="title" style="display:;">系统设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/649916/" class="nav-link">设计须知</a></li><li class="dropdown-item"><!----> <a href="/pages/3fcc71/" class="nav-link">UML画图</a></li><li class="dropdown-item"><!----> <a href="/pages/793d0a/" class="nav-link">权限校验</a></li><li class="dropdown-item"><!----> <a href="/pages/6ea7eb/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务" class="dropdown-title"><!----> <span class="title" style="display:;">微服务</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/c6222f/" class="nav-link">API网关</a></li><li class="dropdown-item"><!----> <a href="/pages//" class="nav-link">RPC</a></li><li class="dropdown-item"><!----> <a href="/pages/2f66e5/" class="nav-link">消息队列</a></li><li class="dropdown-item"><!----> <a href="/pages/75e0cf/" class="nav-link">SpringCloud</a></li><li class="dropdown-item"><!----> <a href="/pages/957695/" class="nav-link">分布式事务</a></li><li class="dropdown-item"><!----> <a href="/pages/2beec7/" class="nav-link">云存储</a></li><li class="dropdown-item"><!----> <a href="/pages/412fe7/" class="nav-link">虚拟机</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发日常" class="dropdown-title"><!----> <span class="title" style="display:;">开发日常</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/626493/" class="nav-link">开发工具篇</a></li><li class="dropdown-item"><!----> <a href="/pages/bdbd1f/" class="nav-link">工具库篇</a></li><li class="dropdown-item"><!----> <a href="/pages/cc202d/" class="nav-link">开发技巧篇</a></li><li class="dropdown-item"><!----> <a href="/pages/dea09d/" class="nav-link">工具类系列</a></li><li class="dropdown-item"><!----> <a href="/pages/3cd6be/" class="nav-link">随笔</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习" class="dropdown-title"><!----> <span class="title" style="display:;">前端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/99897f/" class="nav-link">HTML与CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/51542d/" class="nav-link">JS学习</a></li><li class="dropdown-item"><!----> <a href="/pages/803f9d/" class="nav-link">Vue3入门</a></li><li class="dropdown-item"><!----> <a href="/pages/ca4cfb/" class="nav-link">Vue3进阶</a></li><li class="dropdown-item"><!----> <a href="/pages/50e8d3/" class="nav-link">黑马Vue3</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目笔记" class="dropdown-title"><!----> <span class="title" style="display:;">项目笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/ebb9f9/" class="nav-link">脚手架搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/fbc2fc/" class="nav-link">瑞吉外卖</a></li><li class="dropdown-item"><!----> <a href="/pages/ee76ba/" class="nav-link">黑马点评</a></li><li class="dropdown-item"><!----> <a href="/pages/fa01b6/" class="nav-link">vue-blog</a></li><li class="dropdown-item"><!----> <a href="/pages/b363e2/" class="nav-link">沉梦接口开放平台</a></li><li class="dropdown-item"><!----> <a href="/pages/72b962/" class="nav-link">用户中心</a></li><li class="dropdown-item"><!----> <a href="/pages/8baa93/" class="nav-link">聚合搜索平台</a></li><li class="dropdown-item"><!----> <a href="/pages/a6b2f3/" class="nav-link">仿12306项目</a></li><li class="dropdown-item"><!----> <a href="/pages/a2c11e/" class="nav-link">RuoYi-Vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><!----> <span class="title" style="display:;">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/fa256e/" class="nav-link">博客搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/335531/" class="nav-link">网站收藏箱</a></li><li class="dropdown-item"><!----> <a href="/pages/94109b/" class="nav-link">断墨寻径摘录</a></li><li class="dropdown-item"><!----> <a href="/pages/22f2c8/" class="nav-link">费曼学习法</a></li></ul></div></div> <a href="https://github.com/cmty256" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>API网关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/c6222f/" class="sidebar-link">网关基础知识小结</a></li><li><a href="/pages/bd45a4/" class="sidebar-link">Gateway官方文档学习</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>RPC</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>消息队列</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>RocketMQ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/2f66e5/" class="sidebar-link">RocketMQ入门</a></li><li><a href="/pages/129909/" class="sidebar-link">SpringBoot整合RocketMQ</a></li><li><a href="/pages/0eab4a/" class="sidebar-link">RocketMQ5.1.2源码解析</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>Kafka</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/dd5092/" class="sidebar-link">Kafka基础小结</a></li><li><a href="/pages/fe1a95/" class="sidebar-link">Kafka的下载安装以及使用</a></li><li><a href="/pages/ac6fb6/" class="sidebar-link">Kafka整合SpringBoot</a></li><li><a href="/pages/2f4de9/" class="sidebar-link">Kafka可视化工具</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Spring Cloud</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>Spring Cloud Alibaba 从入门到实战</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/75e0cf/" class="sidebar-link">基础知识篇</a></li><li><a href="/pages/55f823/" class="sidebar-link">分布式配置</a></li><li><a href="/pages/10bb93/" class="sidebar-link">服务注册与发现</a></li><li><a href="/pages/eb7dec/" class="sidebar-link">分布式服务调用</a></li><li><a href="/pages/0274b7/" aria-current="page" class="active sidebar-link">服务熔断和限流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/0274b7/#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header level2"><a href="/pages/0274b7/#sentinel-高可用护航的利器" class="sidebar-link">Sentinel: 高可用护航的利器</a></li><li class="sidebar-sub-header level2"><a href="/pages/0274b7/#使用场景" class="sidebar-link">使用场景</a></li><li class="sidebar-sub-header level2"><a href="/pages/0274b7/#服务限流-熔断实战" class="sidebar-link">服务限流/熔断实战</a></li><li class="sidebar-sub-header level2"><a href="/pages/0274b7/#流控降级组件对比" class="sidebar-link">流控降级组件对比</a></li><li class="sidebar-sub-header level2"><a href="/pages/0274b7/#最后" class="sidebar-link">最后</a></li><li class="sidebar-sub-header level2"><a href="/pages/0274b7/#参考书籍" class="sidebar-link">参考书籍</a></li></ul></li><li><a href="/pages/9ba6ee/" class="sidebar-link">分布式消息（事件）驱动</a></li><li><a href="/pages/7795b9/" class="sidebar-link">分布式事务</a></li></ul></section></li><li><a href="/pages/d67430/" class="sidebar-link">SpringCloud Stream学习</a></li><li><a href="/pages/64dab7/" class="sidebar-link">Nacos学习</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>分布式事务</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/957695/" class="sidebar-link">认识Seata</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>云存储</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/2beec7/" class="sidebar-link">minio</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>搜索引擎</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/9eed4b/" class="sidebar-link">Elasticsearch入门</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>虚拟机</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/412fe7/" class="sidebar-link">Linux基础小结</a></li><li><a href="/pages/051c71/" class="sidebar-link">Linux环境搭建</a></li><li><a href="/pages/44a072/" class="sidebar-link">安装Docker</a></li><li><a href="/pages/b0e1a1/" class="sidebar-link">Docker入门</a></li><li><a href="/pages/c3b2fc/" class="sidebar-link">配置桥接模式</a></li><li><a href="/pages/3eae7a/" class="sidebar-link">防火墙相关</a></li><li><a href="/pages/6a4258/" class="sidebar-link">查看日志的六种命令详解</a></li><li><a href="/pages/478e1a/" class="sidebar-link">docker run指令</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>微服务</span></li><li data-v-06225672><span data-v-06225672>Spring Cloud</span></li><li data-v-06225672><span data-v-06225672>Spring Cloud Alibaba 从入门到实战</span></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/cmty256" target="_blank" title="作者" class="beLink" data-v-06225672>沉梦听雨</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-09-26</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">服务熔断和限流<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="服务熔断和限流"><a href="#服务熔断和限流" class="header-anchor">#</a> 服务熔断和限流</h1> <blockquote><p>官方文档：<a href="https://github.com/alibaba/spring-cloud-alibaba/wiki/Sentinel" target="_blank" rel="noopener noreferrer">Sentinel · alibaba/spring-cloud-alibaba Wiki (github.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p><em>为什么需要流控降级？</em></p> <p>我们的生产环境经常会出现一些不稳定的情况，如：</p> <ul><li>大促时瞬间洪峰流量导致系统超出最大负载，load 飙高，系统崩溃导致用户无法下单</li> <li>“黑马”热点商品击穿缓存，DB 被打垮，挤占正常流量</li> <li>调用端被不稳定服务拖垮，线程池被占满，导致整个调用链路卡死</li></ul> <p>这些不稳定的场景可能会导致严重后果。大家可能想问：</p> <ol><li>如何做到均匀平滑的用户访问？</li> <li>如何预防流量过大或服务不稳定带来的影响？</li></ol> <p>这时候我们就要请出微服务稳定性的法宝 —— <strong>高可用流量防护</strong>，其中重要的手段就是【流量控制】和【熔断降级】，它们是保障微服务稳 定性重要的一环。</p> <p><em>为什么需要流量控制？</em></p> <p>流量是非常随机性的、不可预测的。前一秒可能还风平浪静，后一秒可能就出现流量洪峰了（例如双十一零点的场景）。</p> <p>然而我们系统的容量总是有限的，如果突然而来的流量超过了系统的承受能力，就可能会导致请求处理不过来，堆积的请求处理缓慢，CPU/Load 飙高，最后导致系统崩溃。</p> <p>因此，我们需要针对这种突发的流量来进行限制，在尽可能处理请求的同时来保障服务不被打垮，这就是<strong>流量控制</strong>。</p> <p><em>为什么需要熔断降级？</em></p> <p>一个服务常常会调用别的模块，可能是另外的一个远程服务、数据库，或者第三方 API 等。</p> <p>例如，</p> <ul><li>支付的时候，可能需要远程调用银联提供的 API；</li> <li>查询某个商品的价格，可能需要进行数据库查询。</li></ul> <p>然而，这个<strong>被依赖服务的稳定性是不能保证的</strong>。如果依赖的服务出现了不稳定的情况，请求的响应时间变长，那么调用服务的方法的响应时间也会变长，线程会产生堆积，最终可能耗尽业务自身的线程池，服务本身也变得不可用。</p> <p>现代微服务架构都是分布式的，由非常多的服务组成。不同服务之间相互调用，组成复杂的调用链路。以上的问题在链路调用中会产生放大的效果。复杂链路上的某一环不稳定，就可能会层层级联，最终导致整个链路都不可用。<strong>因此我们需要对不稳定的弱依赖服务进行熔断降级，暂时切断不稳定调用，避免局部不稳定因素导致整体的雪崩。</strong></p> <h2 id="sentinel-高可用护航的利器"><a href="#sentinel-高可用护航的利器" class="header-anchor">#</a> Sentinel: 高可用护航的利器</h2> <p>Sentinel 是阿里巴巴开源的，面向分布式服务架构的<strong>高可用防护组件</strong>，<em>主要以流量为切入点</em>，从流量控制、流量整形、熔断降级、系统自适应保护、热点防护等多个维度来帮助开发者保障微服务的稳定性。</p> <blockquote><p>Sentinel 承接了阿里巴巴近 10 年的双十一大促流量的核心场景，例如秒杀、冷启动、消息削峰填谷、自适应流量控制、实时熔断下游不可用服务等，是保障微服务高可用的利器，原生支持 Java/Go/C++ 等多种语言，并且提供 Istio/Envoy 全局流控支持来为 Service Mesh 提供高可用防护的能力。</p></blockquote> <p>Sentinel 的技术亮点：</p> <ul><li>高度可扩展能力：基础核心 + SPI 接口扩展能力，用户可以方便地扩展流控、通信、监控等功能。</li> <li>多样化的流量控制策略（资源粒度、调用关系、流控指标、流控效果等多个维度），提供分布式集群流控的能力。</li> <li>热点流量探测和防护。</li> <li>对不稳定服务进行熔断降级和隔离。</li> <li>全局维度的系统负载自适应保护，根据系统水位实时调节流量。</li> <li>覆盖 API Gateway 场景，为 Spring Cloud Gateway、Zuul 提供网关流量控制的能力。</li> <li>实时监控和规则动态配置管理能力。</li></ul> <p><img alt="image" data-src="https://cmty256.github.io/imgs-blog/microservice/image.3zehftvytem0.webp" loading="lazy" class="lazy"></p> <h2 id="使用场景"><a href="#使用场景" class="header-anchor">#</a> 使用场景</h2> <ol><li>在服务提供方（Service Provider）的场景下，我们需要<strong>保护服务提供方自身不被流量洪峰打垮</strong>。这时候通常根据服务提供方的服务能力进行流量控制，或针对特定的服务调用方进行限制。我们可以结合前期压测评估核心接口的承受能力，配置 QPS 模式的限流，当每秒的请求量超过设定的阈值时，会自动拒绝多余的请求。</li> <li>为了<strong>避免调用其他服务时被不稳定的服务拖垮自身</strong>，我们需要在服务调用端（Service Consumer）对不稳定服务依赖进行隔离和熔断。手段包括信号量隔离、异常比例降级、RT 降级等多种手段。</li> <li>当系统长期处于低水位的情况下，流量突然增加时，直接把系统拉升到高水位可能瞬间把系统压垮。这时候我们可以借助 Sentinel 的 WarmUp 流控模式控制通过的流量缓慢增加，在一定时间内逐渐增加到阈值上限，而不是在一瞬间全部放行。这样<strong>可以给冷系统一个预热的时间</strong>，避免冷系统被压垮。</li> <li>利用 Sentinel 的匀速排队模式进行“削峰填谷”，把请求突刺均摊到一段时间内，<strong>让系统负载保持在请求处理水位之内</strong>，同时尽可能地处理更多请求。</li> <li>利用 Sentinel 的网关流控特性，在<strong>网关入口处进行流量防护</strong>，或限制 API 的调用频率。</li></ol> <h2 id="服务限流-熔断实战"><a href="#服务限流-熔断实战" class="header-anchor">#</a> 服务限流/熔断实战</h2> <p>实例项目由四个模块构成：</p> <ol><li>service-api: 服务接口定义，供 consumer/provider 引用。</li> <li>dubbo-provider: Dubbo 服务端，对外提供一些服务。</li> <li>web-api-demo: Spring Boot Web 应用，其中的一些 API 会作为 consumer 来调用 dubbo-provider 获取结果。</li></ol> <h2 id="流控降级组件对比"><a href="#流控降级组件对比" class="header-anchor">#</a> 流控降级组件对比</h2> <table><thead><tr><th>功能/特性</th> <th>Sentinel</th> <th>Hystrix</th> <th>resilience4j</th></tr></thead> <tbody><tr><td>隔离策略</td> <td>信号量隔离（并发控制）</td> <td>线程池隔离/信号量</td> <td>信号量隔离</td></tr> <tr><td>熔断降级策略</td> <td>基于慢调用比例、异常比例、异常数</td> <td>基于异常比例</td> <td>基于异常比例、响应时间</td></tr> <tr><td>实时统计实现</td> <td>滑动窗口（LeapArray）</td> <td>滑动窗口（基于 Rx Java）</td> <td>Ring Bit Buffer</td></tr> <tr><td>动态规则配置</td> <td>支持多种数据源</td> <td>支持多种数据源</td> <td>有限支持</td></tr> <tr><td>扩展性</td> <td>多个扩展点</td> <td>插件的形式</td> <td>接口的形式</td></tr> <tr><td>基于注解的支持</td> <td>支持</td> <td>支持</td> <td>支持</td></tr> <tr><td>限流</td> <td>基于 QPS，支持基于调用关系的限流</td> <td>有限的支持</td> <td>Rate Limiter</td></tr> <tr><td>流量整形</td> <td>支持预热模式与匀速排队控制效果</td> <td>不支持</td> <td>简单的 Rate Limiter 模式</td></tr> <tr><td>系统自适应保护</td> <td>支持</td> <td>不支持</td> <td>不支持</td></tr> <tr><td>多语言支持</td> <td>Java/Go/C++</td> <td>Java</td> <td>Java</td></tr> <tr><td>Service Mesh 支持</td> <td>支持 Envoy/Istio</td> <td>不支持</td> <td>不支持</td></tr> <tr><td>控制台</td> <td>提供开箱即用的控制台，可配置规则、实时监控、机器发现等</td> <td>简单的监控查看</td> <td>不提供控制台，可对接 其它监控系统</td></tr></tbody></table> <h2 id="最后"><a href="#最后" class="header-anchor">#</a> 最后</h2> <p><em>是不是服务的量级很小就不用进行限流防护了呢？</em></p> <p><em>是不是微服务的架构比较简单就不用引入熔断保护机制了呢？</em></p> <p>其实，<strong>这与请求的量级、架构的复杂程度无关</strong>。很多时候，可能正是一个非常边缘的服务出现故障而导致整体业务受影响，造成巨大损失。我们需要具 有面向失败设计的意识，在平时就做好容量规划和强弱依赖的梳理，合理地配置流控降级规 则，做好事前防护，而不是在线上出现问题以后再进行补救。</p> <h2 id="参考书籍"><a href="#参考书籍" class="header-anchor">#</a> 参考书籍</h2> <p><a href="https://developer.aliyun.com/article/778252" target="_blank" rel="noopener noreferrer">重磅下载 | Java 开发者必备手册《Spring Cloud Alibaba 从入门到实战》，阿里双11同款！-阿里云开发者社区 (aliyun.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/9/25 11:16:13</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/eb7dec/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">分布式服务调用</div></a> <a href="/pages/9ba6ee/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">分布式消息（事件）驱动</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/eb7dec/" class="prev">分布式服务调用</a></span> <span class="next"><a href="/pages/9ba6ee/">分布式消息（事件）驱动</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:2691357857@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/cmty256/cmty256.github.io" title="Github" target="_blank" class="iconfont icon-github"></a><a href="https://blog.csdn.net/qq_54088234?spm=1011.2124.3001.5343" title="CSDN" target="_blank" class="iconfont icon-csdn"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2024
    <span>沉梦听雨 | <a href="https://gitee.com/dream-deeply-tyu" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><canvas id="vuepress-canvas-cursor"></canvas><!----><div></div></div></div>
    <script src="/assets/js/app.81da6fd4.js" defer></script><script src="/assets/js/2.44c2282a.js" defer></script><script src="/assets/js/149.469f0fb8.js" defer></script><script src="/assets/js/6.733ffa2a.js" defer></script>
  </body>
</html>
