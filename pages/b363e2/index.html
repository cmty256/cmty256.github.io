<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>设计思路 | 沉梦听雨的编程指南</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="https://cmty256.github.io/imgs-blog/logo/白云.38zbldnhh180.jpg">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3077305_pt8umhrn4k9.css">
    <script>
            var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?04a2517feeaf9f0d4d507cee97057d7c";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
            })();
          </script>
    <meta name="description" content="满招损，谦受益">
    <meta name="msvalidate.01" content="C6CD7D17F253A4A17B19D2EEBC95189E">
    <meta name="google-site-verification" content="1_X5AziuUEYcv2PowGXK9yiTwKre1owdUNTNB28UwQo">
    <meta name="keywords" content="编程分享, 开发, 程序员, Java, 计算机, IT, 八股">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.3543fb06.css" as="style"><link rel="preload" href="/assets/js/app.cded0381.js" as="script"><link rel="preload" href="/assets/js/2.02bc9df6.js" as="script"><link rel="preload" href="/assets/js/277.f79747f5.js" as="script"><link rel="preload" href="/assets/js/6.9155b086.js" as="script"><link rel="prefetch" href="/assets/js/10.5c19a6fa.js"><link rel="prefetch" href="/assets/js/100.46c61337.js"><link rel="prefetch" href="/assets/js/101.058d4bcb.js"><link rel="prefetch" href="/assets/js/102.133876a6.js"><link rel="prefetch" href="/assets/js/103.bd6500f4.js"><link rel="prefetch" href="/assets/js/104.e8571922.js"><link rel="prefetch" href="/assets/js/105.fd27872d.js"><link rel="prefetch" href="/assets/js/106.bfd268a8.js"><link rel="prefetch" href="/assets/js/107.58a9cb6c.js"><link rel="prefetch" href="/assets/js/108.7311c481.js"><link rel="prefetch" href="/assets/js/109.38b10e69.js"><link rel="prefetch" href="/assets/js/11.028ac22d.js"><link rel="prefetch" href="/assets/js/110.082e0024.js"><link rel="prefetch" href="/assets/js/111.f069effc.js"><link rel="prefetch" href="/assets/js/112.fd8da57a.js"><link rel="prefetch" href="/assets/js/113.29f359e9.js"><link rel="prefetch" href="/assets/js/114.5979e515.js"><link rel="prefetch" href="/assets/js/115.a9486ced.js"><link rel="prefetch" href="/assets/js/116.a6262a44.js"><link rel="prefetch" href="/assets/js/117.74681f9c.js"><link rel="prefetch" href="/assets/js/118.cc4246eb.js"><link rel="prefetch" href="/assets/js/119.c6fb19d8.js"><link rel="prefetch" href="/assets/js/12.6d898115.js"><link rel="prefetch" href="/assets/js/120.0f7f924a.js"><link rel="prefetch" href="/assets/js/121.cb2768e3.js"><link rel="prefetch" href="/assets/js/122.c44df791.js"><link rel="prefetch" href="/assets/js/123.3bbdd0b1.js"><link rel="prefetch" href="/assets/js/124.e7ed285c.js"><link rel="prefetch" href="/assets/js/125.0e08c027.js"><link rel="prefetch" href="/assets/js/126.dd0f5e6f.js"><link rel="prefetch" href="/assets/js/127.645cdaaa.js"><link rel="prefetch" href="/assets/js/128.9da5b3f9.js"><link rel="prefetch" href="/assets/js/129.306b5040.js"><link rel="prefetch" href="/assets/js/13.2bacd6e3.js"><link rel="prefetch" href="/assets/js/130.9b1d716c.js"><link rel="prefetch" href="/assets/js/131.cbd95e06.js"><link rel="prefetch" href="/assets/js/132.73dfbdfb.js"><link rel="prefetch" href="/assets/js/133.7c026ef8.js"><link rel="prefetch" href="/assets/js/134.ca62eced.js"><link rel="prefetch" href="/assets/js/135.8b456217.js"><link rel="prefetch" href="/assets/js/136.25ec99b7.js"><link rel="prefetch" href="/assets/js/137.9db0e6fa.js"><link rel="prefetch" href="/assets/js/138.69ddd296.js"><link rel="prefetch" href="/assets/js/139.890407fd.js"><link rel="prefetch" href="/assets/js/14.01cbd032.js"><link rel="prefetch" href="/assets/js/140.44a2eab4.js"><link rel="prefetch" href="/assets/js/141.2e995a51.js"><link rel="prefetch" href="/assets/js/142.ccf0802b.js"><link rel="prefetch" href="/assets/js/143.8f6a8699.js"><link rel="prefetch" href="/assets/js/144.3580c8c9.js"><link rel="prefetch" href="/assets/js/145.4b20272b.js"><link rel="prefetch" href="/assets/js/146.07a8752d.js"><link rel="prefetch" href="/assets/js/147.d20e25eb.js"><link rel="prefetch" href="/assets/js/148.afdb7aab.js"><link rel="prefetch" href="/assets/js/149.030188a6.js"><link rel="prefetch" href="/assets/js/15.8871e9cc.js"><link rel="prefetch" href="/assets/js/150.1e5cff5a.js"><link rel="prefetch" href="/assets/js/151.0fa8a9d1.js"><link rel="prefetch" href="/assets/js/152.e08d81b4.js"><link rel="prefetch" href="/assets/js/153.33b50a51.js"><link rel="prefetch" href="/assets/js/154.d4a382b5.js"><link rel="prefetch" href="/assets/js/155.2e07bfb8.js"><link rel="prefetch" href="/assets/js/156.1b8fe242.js"><link rel="prefetch" href="/assets/js/157.7a3b351a.js"><link rel="prefetch" href="/assets/js/158.d2090af5.js"><link rel="prefetch" href="/assets/js/159.973260e8.js"><link rel="prefetch" href="/assets/js/16.04070497.js"><link rel="prefetch" href="/assets/js/160.8d84a3ad.js"><link rel="prefetch" href="/assets/js/161.79e5b209.js"><link rel="prefetch" href="/assets/js/162.712031a9.js"><link rel="prefetch" href="/assets/js/163.e65e8c6a.js"><link rel="prefetch" href="/assets/js/164.cc33c998.js"><link rel="prefetch" href="/assets/js/165.72d92a35.js"><link rel="prefetch" href="/assets/js/166.338ad301.js"><link rel="prefetch" href="/assets/js/167.3d6e6c9c.js"><link rel="prefetch" href="/assets/js/168.e9958b50.js"><link rel="prefetch" href="/assets/js/169.c1bbdb9c.js"><link rel="prefetch" href="/assets/js/17.31067a11.js"><link rel="prefetch" href="/assets/js/170.b1025d89.js"><link rel="prefetch" href="/assets/js/171.9a4f2604.js"><link rel="prefetch" href="/assets/js/172.d6992b92.js"><link rel="prefetch" href="/assets/js/173.0a3d7308.js"><link rel="prefetch" href="/assets/js/174.dac57687.js"><link rel="prefetch" href="/assets/js/175.cbdb3a5f.js"><link rel="prefetch" href="/assets/js/176.79256074.js"><link rel="prefetch" href="/assets/js/177.29ba00ec.js"><link rel="prefetch" href="/assets/js/178.a1fddd7f.js"><link rel="prefetch" href="/assets/js/179.53214259.js"><link rel="prefetch" href="/assets/js/18.2a3a7cac.js"><link rel="prefetch" href="/assets/js/180.ac34cca6.js"><link rel="prefetch" href="/assets/js/181.6137a82a.js"><link rel="prefetch" href="/assets/js/182.04240bed.js"><link rel="prefetch" href="/assets/js/183.40912912.js"><link rel="prefetch" href="/assets/js/184.c46fb648.js"><link rel="prefetch" href="/assets/js/185.97ce4023.js"><link rel="prefetch" href="/assets/js/186.d8dc85cc.js"><link rel="prefetch" href="/assets/js/187.fa09e1c8.js"><link rel="prefetch" href="/assets/js/188.a093a51c.js"><link rel="prefetch" href="/assets/js/189.409deb85.js"><link rel="prefetch" href="/assets/js/19.b4f05b00.js"><link rel="prefetch" href="/assets/js/190.26695038.js"><link rel="prefetch" href="/assets/js/191.a8f3d937.js"><link rel="prefetch" href="/assets/js/192.dd26bb07.js"><link rel="prefetch" href="/assets/js/193.c11aaed8.js"><link rel="prefetch" href="/assets/js/194.5ccb3b7e.js"><link rel="prefetch" href="/assets/js/195.860fe3bb.js"><link rel="prefetch" href="/assets/js/196.f1d23080.js"><link rel="prefetch" href="/assets/js/197.e5bd159d.js"><link rel="prefetch" href="/assets/js/198.e70ba884.js"><link rel="prefetch" href="/assets/js/199.dae834c7.js"><link rel="prefetch" href="/assets/js/20.68d82b3e.js"><link rel="prefetch" href="/assets/js/200.2a85e97f.js"><link rel="prefetch" href="/assets/js/201.7b4e2761.js"><link rel="prefetch" href="/assets/js/202.a487e70e.js"><link rel="prefetch" href="/assets/js/203.69f82187.js"><link rel="prefetch" href="/assets/js/204.85e42ed5.js"><link rel="prefetch" href="/assets/js/205.31df88b1.js"><link rel="prefetch" href="/assets/js/206.4921e6a6.js"><link rel="prefetch" href="/assets/js/207.c330e750.js"><link rel="prefetch" href="/assets/js/208.296d76ee.js"><link rel="prefetch" href="/assets/js/209.0fa577f1.js"><link rel="prefetch" href="/assets/js/21.f0611f36.js"><link rel="prefetch" href="/assets/js/210.bc66d616.js"><link rel="prefetch" href="/assets/js/211.acce31bd.js"><link rel="prefetch" href="/assets/js/212.ef576a95.js"><link rel="prefetch" href="/assets/js/213.ac90cbf8.js"><link rel="prefetch" href="/assets/js/214.cec43fb1.js"><link rel="prefetch" href="/assets/js/215.42b4183e.js"><link rel="prefetch" href="/assets/js/216.331e92ec.js"><link rel="prefetch" href="/assets/js/217.9e068f4a.js"><link rel="prefetch" href="/assets/js/218.b55e76d7.js"><link rel="prefetch" href="/assets/js/219.8b85ec86.js"><link rel="prefetch" href="/assets/js/22.b38f0314.js"><link rel="prefetch" href="/assets/js/220.86bc1b47.js"><link rel="prefetch" href="/assets/js/221.f3406443.js"><link rel="prefetch" href="/assets/js/222.045904df.js"><link rel="prefetch" href="/assets/js/223.bdc9fff0.js"><link rel="prefetch" href="/assets/js/224.d9f4397c.js"><link rel="prefetch" href="/assets/js/225.5737361f.js"><link rel="prefetch" href="/assets/js/226.2a791116.js"><link rel="prefetch" href="/assets/js/227.bf772079.js"><link rel="prefetch" href="/assets/js/228.7b4d05fe.js"><link rel="prefetch" href="/assets/js/229.13784066.js"><link rel="prefetch" href="/assets/js/23.63f50e9a.js"><link rel="prefetch" href="/assets/js/230.d5913bc9.js"><link rel="prefetch" href="/assets/js/231.af7b692a.js"><link rel="prefetch" href="/assets/js/232.c3e34baf.js"><link rel="prefetch" href="/assets/js/233.ebbfec94.js"><link rel="prefetch" href="/assets/js/234.e9490c4d.js"><link rel="prefetch" href="/assets/js/235.f1bfde5b.js"><link rel="prefetch" href="/assets/js/236.6992fcfb.js"><link rel="prefetch" href="/assets/js/237.8a97b87a.js"><link rel="prefetch" href="/assets/js/238.a629a0f9.js"><link rel="prefetch" href="/assets/js/239.8192c8af.js"><link rel="prefetch" href="/assets/js/24.fe922d73.js"><link rel="prefetch" href="/assets/js/240.931a16a0.js"><link rel="prefetch" href="/assets/js/241.2596bcd0.js"><link rel="prefetch" href="/assets/js/242.48efe224.js"><link rel="prefetch" href="/assets/js/243.4d3b7708.js"><link rel="prefetch" href="/assets/js/244.aaffe3bf.js"><link rel="prefetch" href="/assets/js/245.39336a0e.js"><link rel="prefetch" href="/assets/js/246.d026df87.js"><link rel="prefetch" href="/assets/js/247.2dd8ffb7.js"><link rel="prefetch" href="/assets/js/248.881725cb.js"><link rel="prefetch" href="/assets/js/249.a0e09544.js"><link rel="prefetch" href="/assets/js/25.a4f99aec.js"><link rel="prefetch" href="/assets/js/250.d89bb760.js"><link rel="prefetch" href="/assets/js/251.635658f2.js"><link rel="prefetch" href="/assets/js/252.0364cc51.js"><link rel="prefetch" href="/assets/js/253.1d1e13a4.js"><link rel="prefetch" href="/assets/js/254.f366e73f.js"><link rel="prefetch" href="/assets/js/255.efdaedfa.js"><link rel="prefetch" href="/assets/js/256.594baaed.js"><link rel="prefetch" href="/assets/js/257.7a143ed1.js"><link rel="prefetch" href="/assets/js/258.ebe9cda7.js"><link rel="prefetch" href="/assets/js/259.f280ad87.js"><link rel="prefetch" href="/assets/js/26.d2338de5.js"><link rel="prefetch" href="/assets/js/260.959a94cd.js"><link rel="prefetch" href="/assets/js/261.d056cdb3.js"><link rel="prefetch" href="/assets/js/262.7a4d8d9a.js"><link rel="prefetch" href="/assets/js/263.d6343df5.js"><link rel="prefetch" href="/assets/js/264.8e6806e6.js"><link rel="prefetch" href="/assets/js/265.ee873080.js"><link rel="prefetch" href="/assets/js/266.771bcf47.js"><link rel="prefetch" href="/assets/js/267.c941b41d.js"><link rel="prefetch" href="/assets/js/268.4f402cef.js"><link rel="prefetch" href="/assets/js/269.50701aed.js"><link rel="prefetch" href="/assets/js/27.9ec638c9.js"><link rel="prefetch" href="/assets/js/270.f2c02404.js"><link rel="prefetch" href="/assets/js/271.87dced61.js"><link rel="prefetch" href="/assets/js/272.0bfdd5a0.js"><link rel="prefetch" href="/assets/js/273.14662bfe.js"><link rel="prefetch" href="/assets/js/274.845b880b.js"><link rel="prefetch" href="/assets/js/275.b9962229.js"><link rel="prefetch" href="/assets/js/276.b9f3cca1.js"><link rel="prefetch" href="/assets/js/278.531f7dc8.js"><link rel="prefetch" href="/assets/js/279.e142b73a.js"><link rel="prefetch" href="/assets/js/28.fdbdecd3.js"><link rel="prefetch" href="/assets/js/280.2d44e8aa.js"><link rel="prefetch" href="/assets/js/281.16672baf.js"><link rel="prefetch" href="/assets/js/282.6d47850f.js"><link rel="prefetch" href="/assets/js/283.e24300ac.js"><link rel="prefetch" href="/assets/js/284.4db9eccb.js"><link rel="prefetch" href="/assets/js/285.2691dcae.js"><link rel="prefetch" href="/assets/js/286.6c84442d.js"><link rel="prefetch" href="/assets/js/287.8d720e98.js"><link rel="prefetch" href="/assets/js/288.88cb8890.js"><link rel="prefetch" href="/assets/js/289.83b18fa0.js"><link rel="prefetch" href="/assets/js/29.b1393548.js"><link rel="prefetch" href="/assets/js/290.79b265ac.js"><link rel="prefetch" href="/assets/js/291.fca3f174.js"><link rel="prefetch" href="/assets/js/292.7201a80b.js"><link rel="prefetch" href="/assets/js/293.3f79a0b4.js"><link rel="prefetch" href="/assets/js/294.09e25241.js"><link rel="prefetch" href="/assets/js/295.97f9827e.js"><link rel="prefetch" href="/assets/js/296.8ccd3c5b.js"><link rel="prefetch" href="/assets/js/297.70fa6c50.js"><link rel="prefetch" href="/assets/js/3.931a19c0.js"><link rel="prefetch" href="/assets/js/30.4b62329a.js"><link rel="prefetch" href="/assets/js/31.66a2da63.js"><link rel="prefetch" href="/assets/js/32.87aab090.js"><link rel="prefetch" href="/assets/js/33.490258ea.js"><link rel="prefetch" href="/assets/js/34.b533dc5c.js"><link rel="prefetch" href="/assets/js/35.a76efbbd.js"><link rel="prefetch" href="/assets/js/36.89a6af66.js"><link rel="prefetch" href="/assets/js/37.fad25f70.js"><link rel="prefetch" href="/assets/js/38.7910dc4d.js"><link rel="prefetch" href="/assets/js/39.432ee650.js"><link rel="prefetch" href="/assets/js/4.76529d39.js"><link rel="prefetch" href="/assets/js/40.0105d75b.js"><link rel="prefetch" href="/assets/js/41.301d1785.js"><link rel="prefetch" href="/assets/js/42.1ae0a844.js"><link rel="prefetch" href="/assets/js/43.bc31000b.js"><link rel="prefetch" href="/assets/js/44.8971df73.js"><link rel="prefetch" href="/assets/js/45.1650c7f5.js"><link rel="prefetch" href="/assets/js/46.34dedaec.js"><link rel="prefetch" href="/assets/js/47.e3d09cf0.js"><link rel="prefetch" href="/assets/js/48.dfdb2c5c.js"><link rel="prefetch" href="/assets/js/49.c84594af.js"><link rel="prefetch" href="/assets/js/5.f7dbece9.js"><link rel="prefetch" href="/assets/js/50.35bf9e9c.js"><link rel="prefetch" href="/assets/js/51.1ee87d4c.js"><link rel="prefetch" href="/assets/js/52.25381af8.js"><link rel="prefetch" href="/assets/js/53.9d03b2f9.js"><link rel="prefetch" href="/assets/js/54.64a88bde.js"><link rel="prefetch" href="/assets/js/55.16d9ff90.js"><link rel="prefetch" href="/assets/js/56.b4a142b5.js"><link rel="prefetch" href="/assets/js/57.8d783a1a.js"><link rel="prefetch" href="/assets/js/58.827b8088.js"><link rel="prefetch" href="/assets/js/59.8578679d.js"><link rel="prefetch" href="/assets/js/60.ddbb613b.js"><link rel="prefetch" href="/assets/js/61.a661463b.js"><link rel="prefetch" href="/assets/js/62.5d54f410.js"><link rel="prefetch" href="/assets/js/63.86bad1cc.js"><link rel="prefetch" href="/assets/js/64.17d2f0de.js"><link rel="prefetch" href="/assets/js/65.b8b1a69b.js"><link rel="prefetch" href="/assets/js/66.aa444f29.js"><link rel="prefetch" href="/assets/js/67.97fd03c3.js"><link rel="prefetch" href="/assets/js/68.b754b113.js"><link rel="prefetch" href="/assets/js/69.00a40b6e.js"><link rel="prefetch" href="/assets/js/7.92c41863.js"><link rel="prefetch" href="/assets/js/70.38ea0b71.js"><link rel="prefetch" href="/assets/js/71.c0963c64.js"><link rel="prefetch" href="/assets/js/72.249174fc.js"><link rel="prefetch" href="/assets/js/73.75bd7bab.js"><link rel="prefetch" href="/assets/js/74.33c414aa.js"><link rel="prefetch" href="/assets/js/75.fee5afe5.js"><link rel="prefetch" href="/assets/js/76.f2b95f81.js"><link rel="prefetch" href="/assets/js/77.b7d37285.js"><link rel="prefetch" href="/assets/js/78.d8277e74.js"><link rel="prefetch" href="/assets/js/79.65eb1c72.js"><link rel="prefetch" href="/assets/js/8.0efb528e.js"><link rel="prefetch" href="/assets/js/80.0d696065.js"><link rel="prefetch" href="/assets/js/81.25b301f3.js"><link rel="prefetch" href="/assets/js/82.5a980040.js"><link rel="prefetch" href="/assets/js/83.b6c6e0f2.js"><link rel="prefetch" href="/assets/js/84.1022a83a.js"><link rel="prefetch" href="/assets/js/85.5274de15.js"><link rel="prefetch" href="/assets/js/86.76700757.js"><link rel="prefetch" href="/assets/js/87.01d144aa.js"><link rel="prefetch" href="/assets/js/88.492935a7.js"><link rel="prefetch" href="/assets/js/89.4b0e5c1a.js"><link rel="prefetch" href="/assets/js/9.d5d32217.js"><link rel="prefetch" href="/assets/js/90.f25b68c7.js"><link rel="prefetch" href="/assets/js/91.33075a43.js"><link rel="prefetch" href="/assets/js/92.dbd26e4b.js"><link rel="prefetch" href="/assets/js/93.fa27ab02.js"><link rel="prefetch" href="/assets/js/94.1e52fbe4.js"><link rel="prefetch" href="/assets/js/95.f9587b84.js"><link rel="prefetch" href="/assets/js/96.6c7e28db.js"><link rel="prefetch" href="/assets/js/97.81082d82.js"><link rel="prefetch" href="/assets/js/98.f3b99a37.js"><link rel="prefetch" href="/assets/js/99.4d27a90b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3543fb06.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://cmty256.github.io/imgs-blog/logo/白云.38zbldnhh180.jpg" alt="沉梦听雨的编程指南" class="logo"> <span class="site-name can-hide">沉梦听雨的编程指南</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/11aacc/" class="nav-link">基础篇</a></li><li class="dropdown-item"><!----> <a href="/pages/2e780e/" class="nav-link">集合篇</a></li><li class="dropdown-item"><!----> <a href="/pages/846d88/" class="nav-link">并发篇</a></li><li class="dropdown-item"><!----> <a href="/pages/562a37/" class="nav-link">JVM</a></li><li class="dropdown-item"><!----> <a href="/pages/a5d9a6/" class="nav-link">新特性</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><!----> <span class="title" style="display:;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/7b1cb2/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/pages/6048a8/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/pages/3b34ba/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/efa3f2/" class="nav-link">基础篇</a></li><li class="dropdown-item"><!----> <a href="/pages/ccc445/" class="nav-link">MySql</a></li><li class="dropdown-item"><!----> <a href="/pages/54616e/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/980c9c/" class="nav-link">达梦数据库</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用框架" class="dropdown-title"><!----> <span class="title" style="display:;">常用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/4969e6/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/pages/72bcc7/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/pages/93b888/" class="nav-link">Mybatis</a></li><li class="dropdown-item"><!----> <a href="/pages/a54fbc/" class="nav-link">Shiro</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="系统设计" class="dropdown-title"><!----> <span class="title" style="display:;">系统设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/649916/" class="nav-link">设计须知</a></li><li class="dropdown-item"><!----> <a href="/pages/3fcc71/" class="nav-link">UML画图</a></li><li class="dropdown-item"><!----> <a href="/pages/793d0a/" class="nav-link">权限校验</a></li><li class="dropdown-item"><!----> <a href="/pages/6ea7eb/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务" class="dropdown-title"><!----> <span class="title" style="display:;">微服务</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/c6222f/" class="nav-link">API网关</a></li><li class="dropdown-item"><!----> <a href="/pages//" class="nav-link">RPC</a></li><li class="dropdown-item"><!----> <a href="/pages/2f66e5/" class="nav-link">消息队列</a></li><li class="dropdown-item"><!----> <a href="/pages/75e0cf/" class="nav-link">SpringCloud</a></li><li class="dropdown-item"><!----> <a href="/pages/957695/" class="nav-link">分布式事务</a></li><li class="dropdown-item"><!----> <a href="/pages/2beec7/" class="nav-link">云存储</a></li><li class="dropdown-item"><!----> <a href="/pages/9eed4b/" class="nav-link">搜索引擎</a></li><li class="dropdown-item"><!----> <a href="/pages/9f26dc/" class="nav-link">多媒体框架</a></li><li class="dropdown-item"><!----> <a href="/pages/412fe7/" class="nav-link">虚拟机</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发日常" class="dropdown-title"><!----> <span class="title" style="display:;">开发日常</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/626493/" class="nav-link">开发工具篇</a></li><li class="dropdown-item"><!----> <a href="/pages/bdbd1f/" class="nav-link">工具库篇</a></li><li class="dropdown-item"><!----> <a href="/pages/cc202d/" class="nav-link">开发技巧篇</a></li><li class="dropdown-item"><!----> <a href="/pages/dea09d/" class="nav-link">工具类系列</a></li><li class="dropdown-item"><!----> <a href="/pages/3cd6be/" class="nav-link">随笔</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习" class="dropdown-title"><!----> <span class="title" style="display:;">前端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/3eeffb/" class="nav-link">前端环境搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/99897f/" class="nav-link">HTML与CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/51542d/" class="nav-link">JS学习</a></li><li class="dropdown-item"><!----> <a href="/pages/3c013f/" class="nav-link">Axios入门</a></li><li class="dropdown-item"><!----> <a href="/pages/47c242/" class="nav-link">Vue Router入门</a></li><li class="dropdown-item"><!----> <a href="/pages/51542d/" class="nav-link">Pinia入门</a></li><li class="dropdown-item"><!----> <a href="/pages/803f9d/" class="nav-link">Vue3入门</a></li><li class="dropdown-item"><!----> <a href="/pages/ca4cfb/" class="nav-link">Vue3进阶</a></li><li class="dropdown-item"><!----> <a href="/pages/50e8d3/" class="nav-link">黑马Vue3</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目笔记" class="dropdown-title"><!----> <span class="title" style="display:;">项目笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/ebb9f9/" class="nav-link">脚手架搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/fbc2fc/" class="nav-link">瑞吉外卖</a></li><li class="dropdown-item"><!----> <a href="/pages/ee76ba/" class="nav-link">黑马点评</a></li><li class="dropdown-item"><!----> <a href="/pages/fa01b6/" class="nav-link">vue-blog</a></li><li class="dropdown-item"><!----> <a href="/pages/b363e2/" aria-current="page" class="nav-link router-link-exact-active router-link-active">沉梦接口开放平台</a></li><li class="dropdown-item"><!----> <a href="/pages/72b962/" class="nav-link">用户中心</a></li><li class="dropdown-item"><!----> <a href="/pages/8baa93/" class="nav-link">聚合搜索平台</a></li><li class="dropdown-item"><!----> <a href="/pages/a6b2f3/" class="nav-link">仿12306项目</a></li><li class="dropdown-item"><!----> <a href="/pages/b85237/" class="nav-link">壁纸小程序项目</a></li><li class="dropdown-item"><!----> <a href="/pages/a2c11e/" class="nav-link">RuoYi-Vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><!----> <span class="title" style="display:;">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/fa256e/" class="nav-link">博客搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/335531/" class="nav-link">网站收藏箱</a></li><li class="dropdown-item"><!----> <a href="/pages/94109b/" class="nav-link">断墨寻径摘录</a></li><li class="dropdown-item"><!----> <a href="/pages/22f2c8/" class="nav-link">费曼学习法</a></li></ul></div></div> <a href="https://github.com/cmty256" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cmty256.github.io/picx-images-hosting/logo/0bd74b62680d5dc2d82d50efcac4546.8adfdu46qo.jpg"> <div class="blogger-info"><h3>沉梦听雨</h3> <span>时间是最好的浸渍剂，而沉淀是最好的提纯器🚀</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/11aacc/" class="nav-link">基础篇</a></li><li class="dropdown-item"><!----> <a href="/pages/2e780e/" class="nav-link">集合篇</a></li><li class="dropdown-item"><!----> <a href="/pages/846d88/" class="nav-link">并发篇</a></li><li class="dropdown-item"><!----> <a href="/pages/562a37/" class="nav-link">JVM</a></li><li class="dropdown-item"><!----> <a href="/pages/a5d9a6/" class="nav-link">新特性</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><!----> <span class="title" style="display:;">计算机基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/7b1cb2/" class="nav-link">计算机网络</a></li><li class="dropdown-item"><!----> <a href="/pages/6048a8/" class="nav-link">操作系统</a></li><li class="dropdown-item"><!----> <a href="/pages/3b34ba/" class="nav-link">数据结构与算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/efa3f2/" class="nav-link">基础篇</a></li><li class="dropdown-item"><!----> <a href="/pages/ccc445/" class="nav-link">MySql</a></li><li class="dropdown-item"><!----> <a href="/pages/54616e/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/980c9c/" class="nav-link">达梦数据库</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用框架" class="dropdown-title"><!----> <span class="title" style="display:;">常用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/4969e6/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/pages/72bcc7/" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/pages/93b888/" class="nav-link">Mybatis</a></li><li class="dropdown-item"><!----> <a href="/pages/a54fbc/" class="nav-link">Shiro</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="系统设计" class="dropdown-title"><!----> <span class="title" style="display:;">系统设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/649916/" class="nav-link">设计须知</a></li><li class="dropdown-item"><!----> <a href="/pages/3fcc71/" class="nav-link">UML画图</a></li><li class="dropdown-item"><!----> <a href="/pages/793d0a/" class="nav-link">权限校验</a></li><li class="dropdown-item"><!----> <a href="/pages/6ea7eb/" class="nav-link">设计模式</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微服务" class="dropdown-title"><!----> <span class="title" style="display:;">微服务</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/c6222f/" class="nav-link">API网关</a></li><li class="dropdown-item"><!----> <a href="/pages//" class="nav-link">RPC</a></li><li class="dropdown-item"><!----> <a href="/pages/2f66e5/" class="nav-link">消息队列</a></li><li class="dropdown-item"><!----> <a href="/pages/75e0cf/" class="nav-link">SpringCloud</a></li><li class="dropdown-item"><!----> <a href="/pages/957695/" class="nav-link">分布式事务</a></li><li class="dropdown-item"><!----> <a href="/pages/2beec7/" class="nav-link">云存储</a></li><li class="dropdown-item"><!----> <a href="/pages/9eed4b/" class="nav-link">搜索引擎</a></li><li class="dropdown-item"><!----> <a href="/pages/9f26dc/" class="nav-link">多媒体框架</a></li><li class="dropdown-item"><!----> <a href="/pages/412fe7/" class="nav-link">虚拟机</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发日常" class="dropdown-title"><!----> <span class="title" style="display:;">开发日常</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/626493/" class="nav-link">开发工具篇</a></li><li class="dropdown-item"><!----> <a href="/pages/bdbd1f/" class="nav-link">工具库篇</a></li><li class="dropdown-item"><!----> <a href="/pages/cc202d/" class="nav-link">开发技巧篇</a></li><li class="dropdown-item"><!----> <a href="/pages/dea09d/" class="nav-link">工具类系列</a></li><li class="dropdown-item"><!----> <a href="/pages/3cd6be/" class="nav-link">随笔</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端学习" class="dropdown-title"><!----> <span class="title" style="display:;">前端学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/3eeffb/" class="nav-link">前端环境搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/99897f/" class="nav-link">HTML与CSS</a></li><li class="dropdown-item"><!----> <a href="/pages/51542d/" class="nav-link">JS学习</a></li><li class="dropdown-item"><!----> <a href="/pages/3c013f/" class="nav-link">Axios入门</a></li><li class="dropdown-item"><!----> <a href="/pages/47c242/" class="nav-link">Vue Router入门</a></li><li class="dropdown-item"><!----> <a href="/pages/51542d/" class="nav-link">Pinia入门</a></li><li class="dropdown-item"><!----> <a href="/pages/803f9d/" class="nav-link">Vue3入门</a></li><li class="dropdown-item"><!----> <a href="/pages/ca4cfb/" class="nav-link">Vue3进阶</a></li><li class="dropdown-item"><!----> <a href="/pages/50e8d3/" class="nav-link">黑马Vue3</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目笔记" class="dropdown-title"><!----> <span class="title" style="display:;">项目笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/ebb9f9/" class="nav-link">脚手架搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/fbc2fc/" class="nav-link">瑞吉外卖</a></li><li class="dropdown-item"><!----> <a href="/pages/ee76ba/" class="nav-link">黑马点评</a></li><li class="dropdown-item"><!----> <a href="/pages/fa01b6/" class="nav-link">vue-blog</a></li><li class="dropdown-item"><!----> <a href="/pages/b363e2/" aria-current="page" class="nav-link router-link-exact-active router-link-active">沉梦接口开放平台</a></li><li class="dropdown-item"><!----> <a href="/pages/72b962/" class="nav-link">用户中心</a></li><li class="dropdown-item"><!----> <a href="/pages/8baa93/" class="nav-link">聚合搜索平台</a></li><li class="dropdown-item"><!----> <a href="/pages/a6b2f3/" class="nav-link">仿12306项目</a></li><li class="dropdown-item"><!----> <a href="/pages/b85237/" class="nav-link">壁纸小程序项目</a></li><li class="dropdown-item"><!----> <a href="/pages/a2c11e/" class="nav-link">RuoYi-Vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><!----> <span class="title" style="display:;">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/fa256e/" class="nav-link">博客搭建</a></li><li class="dropdown-item"><!----> <a href="/pages/335531/" class="nav-link">网站收藏箱</a></li><li class="dropdown-item"><!----> <a href="/pages/94109b/" class="nav-link">断墨寻径摘录</a></li><li class="dropdown-item"><!----> <a href="/pages/22f2c8/" class="nav-link">费曼学习法</a></li></ul></div></div> <a href="https://github.com/cmty256" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/pages/ebb9f9/" class="sidebar-link">脚手架搭建</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>瑞吉外卖</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>黑马点评</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue-blog</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>沉梦接口开放平台</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/b363e2/" aria-current="page" class="active sidebar-link">设计思路</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/b363e2/#项目介绍" class="sidebar-link">项目介绍</a></li><li class="sidebar-sub-header level2"><a href="/pages/b363e2/#第一阶段" class="sidebar-link">第一阶段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#主要内容" class="sidebar-link">主要内容：</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#需求分析" class="sidebar-link">需求分析</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#业务流程" class="sidebar-link">业务流程</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#技术选型" class="sidebar-link">技术选型</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#前端" class="sidebar-link">前端</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#后端" class="sidebar-link">后端</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#数据库表设计" class="sidebar-link">数据库表设计</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#项目脚手架" class="sidebar-link">项目脚手架</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#基础功能开发" class="sidebar-link">基础功能开发</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/b363e2/#第二阶段" class="sidebar-link">第二阶段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#主要内容-2" class="sidebar-link">主要内容：</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#模拟接口项目" class="sidebar-link">模拟接口项目</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#调用接口" class="sidebar-link">调用接口</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#api-签名认证" class="sidebar-link">API 签名认证</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#签名认证实现" class="sidebar-link">签名认证实现</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#开发简单易用的-sdk-简历加分项" class="sidebar-link">开发简单易用的 SDK（简历加分项）</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#为什么需要-starter" class="sidebar-link">为什么需要 Starter？</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#starter-开发流程" class="sidebar-link">Starter 开发流程</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/b363e2/#第三阶段" class="sidebar-link">第三阶段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#主要内容-3" class="sidebar-link">主要内容：</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#功能开发" class="sidebar-link">功能开发</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#接口发布-下线的功能" class="sidebar-link">接口发布 / 下线的功能</a></li><li class="sidebar-sub-header level5"><a href="/pages/b363e2/#业务逻辑" class="sidebar-link">业务逻辑</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#前端浏览接口" class="sidebar-link">前端浏览接口</a></li><li class="sidebar-sub-header level5"><a href="/pages/b363e2/#查看接口文档" class="sidebar-link">查看接口文档</a></li><li class="sidebar-sub-header level5"><a href="/pages/b363e2/#申请签名" class="sidebar-link">申请签名</a></li><li class="sidebar-sub-header level5"><a href="/pages/b363e2/#在线调用" class="sidebar-link">在线调用</a></li><li class="sidebar-sub-header level5"><a href="/pages/b363e2/#调用流程" class="sidebar-link">调用流程</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#todo" class="sidebar-link">TODO</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/b363e2/#第四阶段" class="sidebar-link">第四阶段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#主要内容-4" class="sidebar-link">主要内容：</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#接口调用次数统计" class="sidebar-link">接口调用次数统计</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#问题" class="sidebar-link">问题</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#网关" class="sidebar-link">网关</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#网关作用" class="sidebar-link">网关作用</a></li><li class="sidebar-sub-header level5"><a href="/pages/b363e2/#路由" class="sidebar-link">路由</a></li><li class="sidebar-sub-header level5"><a href="/pages/b363e2/#负载均衡" class="sidebar-link">负载均衡</a></li><li class="sidebar-sub-header level5"><a href="/pages/b363e2/#统一鉴权" class="sidebar-link">统一鉴权</a></li><li class="sidebar-sub-header level5"><a href="/pages/b363e2/#统一处理跨域" class="sidebar-link">统一处理跨域</a></li><li class="sidebar-sub-header level5"><a href="/pages/b363e2/#统一业务处理" class="sidebar-link">统一业务处理</a></li><li class="sidebar-sub-header level5"><a href="/pages/b363e2/#访问控制" class="sidebar-link">访问控制</a></li><li class="sidebar-sub-header level5"><a href="/pages/b363e2/#发布控制" class="sidebar-link">发布控制</a></li><li class="sidebar-sub-header level5"><a href="/pages/b363e2/#流量染色" class="sidebar-link">流量染色</a></li><li class="sidebar-sub-header level5"><a href="/pages/b363e2/#统一接口保护" class="sidebar-link">统一接口保护</a></li><li class="sidebar-sub-header level5"><a href="/pages/b363e2/#统一日志" class="sidebar-link">统一日志</a></li><li class="sidebar-sub-header level5"><a href="/pages/b363e2/#统一文档" class="sidebar-link">统一文档</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#网关的分类" class="sidebar-link">网关的分类</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#网关实现" class="sidebar-link">网关实现</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#spring-cloud-gateway-用法" class="sidebar-link">Spring Cloud Gateway 用法</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#核心概念" class="sidebar-link">核心概念</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#两种配置方式" class="sidebar-link">两种配置方式</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#建议开启日志" class="sidebar-link">建议开启日志</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#断言" class="sidebar-link">断言</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#过滤器" class="sidebar-link">过滤器</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/b363e2/#第五阶段" class="sidebar-link">第五阶段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#主要内容-5" class="sidebar-link">主要内容：</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#要用到的特性" class="sidebar-link">要用到的特性</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#业务逻辑-2" class="sidebar-link">业务逻辑</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#具体实现" class="sidebar-link">具体实现</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#_1、请求转发" class="sidebar-link">1、请求转发</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#_2、编写业务逻辑" class="sidebar-link">2、编写业务逻辑</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#问题-2" class="sidebar-link">问题</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/b363e2/#第六阶段" class="sidebar-link">第六阶段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#主要内容-6" class="sidebar-link">主要内容：</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#网关业务逻辑" class="sidebar-link">网关业务逻辑</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#怎么调用其他项目的方法" class="sidebar-link">怎么调用其他项目的方法？</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#http-请求怎么调用" class="sidebar-link">HTTP 请求怎么调用？</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#rpc" class="sidebar-link">RPC</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#dubbo-框架-rpc-实现" class="sidebar-link">Dubbo 框架（RPC 实现）</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#两种使用方式" class="sidebar-link">两种使用方式</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#官方的示例项目学习" class="sidebar-link">官方的示例项目学习</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#整合运用" class="sidebar-link">整合运用</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/b363e2/#第七阶段" class="sidebar-link">第七阶段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#主要内容-7" class="sidebar-link">主要内容：</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#梳理网关业务逻辑" class="sidebar-link">梳理网关业务逻辑</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#临时问题-如何获取接口转发服务器的地址" class="sidebar-link">临时问题：如何获取接口转发服务器的地址</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#抽象公共服务" class="sidebar-link">抽象公共服务</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#统计分析功能" class="sidebar-link">统计分析功能</a></li><li class="sidebar-sub-header level4"><a href="/pages/b363e2/#需求" class="sidebar-link">需求</a></li><li class="sidebar-sub-header level5"><a href="/pages/b363e2/#前端-2" class="sidebar-link">前端</a></li><li class="sidebar-sub-header level5"><a href="/pages/b363e2/#后端-2" class="sidebar-link">后端</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#上线计划" class="sidebar-link">上线计划</a></li><li class="sidebar-sub-header level3"><a href="/pages/b363e2/#扩展思路" class="sidebar-link">扩展思路</a></li></ul></li></ul></li><li><a href="/pages/292456/" class="sidebar-link">笔记</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>用户中心</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>聚合搜索平台</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>仿12306项目</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>壁纸小程序项目</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>RuoYi-Vue</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><span data-v-06225672>项目笔记</span></li><li data-v-06225672><span data-v-06225672>沉梦接口开放平台</span></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/cmty256" target="_blank" title="作者" class="beLink" data-v-06225672>沉梦听雨</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-06-08</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">设计思路<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="api-调用平台"><a href="#api-调用平台" class="header-anchor">#</a> <code>API</code> 调用平台</h1> <h2 id="项目介绍"><a href="#项目介绍" class="header-anchor">#</a> 项目介绍</h2> <p>一个提供 <code>API</code> 接口供开发者调用的平台。（类似腾讯云）</p> <p>用户可以注册登录，开通接口调用权限。用户可以浏览接口并调用，且每次调用会进行统计。</p> <p>管理员可以发布接口、下线接口、接入接口，以及可视化接口的调用情况、数据。</p> <p>项目侧重于后端，包含较多的编程技巧和架构设计层面的知识。</p> <h2 id="第一阶段"><a href="#第一阶段" class="header-anchor">#</a> 第一阶段</h2> <h3 id="主要内容"><a href="#主要内容" class="header-anchor">#</a> 主要内容：</h3> <ol><li>项目介绍、业务流程、项目计划、需求分析</li> <li>数据库表设计</li> <li>前后端项目初始化（包含 <code>Ant Design Pro</code> 框架最新版本的使用）</li> <li>前后端代码自动生成（提高开发效率）</li> <li>登录页、接口信息页开发</li></ol> <h3 id="需求分析"><a href="#需求分析" class="header-anchor">#</a> 需求分析</h3> <p>背景：</p> <ol><li><p>前端开发需要用到后台接口</p></li> <li><p>使用现成的系统的功能（<a href="http://api.btstu.cn/" target="_blank" rel="noopener noreferrer">博天api<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）</p></li></ol> <p>做一个 <code>API</code> 接口平台：</p> <ol><li>管理员可以对接口信息进行增删改查</li> <li>用户可以访问前台，查看接口信息</li></ol> <p>其他要求：</p> <ol><li>防止攻击（安全性）</li> <li>不能随便调用（限制、开通） -- 限制流量，避免系统崩溃</li> <li><strong>统计调用次数</strong></li> <li>计费</li> <li>流量保护</li> <li><code>API</code> 接入</li></ol> <h3 id="业务流程"><a href="#业务流程" class="header-anchor">#</a> 业务流程</h3> <p><img alt="image-20230424200930707" data-src="https://cmty256.github.io/imgs-blog/images/image-20230424200930707.png" loading="lazy" class="lazy"></p> <h3 id="技术选型"><a href="#技术选型" class="header-anchor">#</a> 技术选型</h3> <h4 id="前端"><a href="#前端" class="header-anchor">#</a> <strong>前端</strong></h4> <ul><li><code>Ant Design Pro</code></li> <li><code>React</code></li> <li><code>Ant Design Procomponents</code></li> <li><code>Umi</code></li> <li><code>Umi Request</code>（<code>Axios</code> 的封装）</li></ul> <h4 id="后端"><a href="#后端" class="header-anchor">#</a> <strong>后端</strong></h4> <ul><li><code>Java Spring Boot</code></li> <li><code>Spring Boot Starter</code>(<code>SDK</code>开发)</li> <li><code>Dubbo</code>（<code>RPC</code>）</li> <li><code>Nacos</code></li> <li><code>Spring Cloud Gateway</code>（网关、限流、日志实现）</li></ul> <h3 id="数据库表设计"><a href="#数据库表设计" class="header-anchor">#</a> 数据库表设计</h3> <div class="language-SQL line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 接口信息</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> myapi<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>interface_info<span class="token punctuation">`</span></span>
<span class="token punctuation">(</span>
    <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span> <span class="token keyword">comment</span> <span class="token string">'主键'</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'接口名称'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>description<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'描述'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>url<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'接口地址'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>request_header<span class="token punctuation">`</span></span> <span class="token keyword">text</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'请求头'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>reponse_header<span class="token punctuation">`</span></span> <span class="token keyword">text</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'响应头'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span> <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'接口状态（0-关闭，1-开启））'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>method<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'请求类型'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'创建人'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>create_time<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token keyword">default</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'创建时间'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>update_time<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token keyword">default</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">comment</span> <span class="token string">'更新时间'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>is_deleted<span class="token punctuation">`</span></span> <span class="token keyword">tinyint</span> <span class="token keyword">default</span> <span class="token number">0</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'是否删除(0-未删, 1-已删)'</span>
<span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'接口信息'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="项目脚手架"><a href="#项目脚手架" class="header-anchor">#</a> <strong>项目脚手架</strong></h3> <p>前端：<code>Ant Design Pro</code> 脚手架（https://pro.ant.design/zh-cn/）</p> <p>后端：<code>springboot-init</code> 后端代码模板</p> <h3 id="基础功能开发"><a href="#基础功能开发" class="header-anchor">#</a> 基础功能开发</h3> <p>增删改查、登录功能（通过对模板的复制粘贴修改完成)</p> <p>前端接口调用：后端使用遵循 <code>openapi</code> 的规范的 <code>swagger</code> 文档，使用前端 <code>Ant Design Pro</code> 框架集成的 <code>openapi</code> 插件自动生成。</p> <h2 id="第二阶段"><a href="#第二阶段" class="header-anchor">#</a> 第二阶段</h2> <h3 id="主要内容-2"><a href="#主要内容-2" class="header-anchor">#</a> 主要内容：</h3> <ol><li>开发接口管理前端页面</li> <li>开发模拟 <code>API</code> 接口</li> <li>开发调用接口客户端</li> <li>开发调用的安全性（<code>API</code> 签名认证）</li> <li>客户端 <code>SDK</code> 的开发（<code>SDK</code>--<code>Spring Boot Starter</code> 开发）</li></ol> <h3 id="模拟接口项目"><a href="#模拟接口项目" class="header-anchor">#</a> 模拟接口项目</h3> <p>项目名称：<code>myapi-interface</code></p> <p>提供三个不同种类的模拟接口：</p> <ol><li><code>GET</code> 接口</li> <li><code>POST</code> 接口（<code>url</code> 传参）</li> <li><code>POST</code> 接口（<code>Restful</code>）</li></ol> <h4 id="调用接口"><a href="#调用接口" class="header-anchor">#</a> 调用接口</h4> <p>几种 <code>HTTP</code> 调用方式：</p> <ol><li><code>HttpClient</code></li> <li><code>RestTemplate</code></li> <li>第三方库（<code>OKHTTP</code>、<code>Hutool</code>)</li></ol> <hr> <p><code>Hutool</code>：https://hutool.cn/docs/#/</p> <p><code>HTTP</code> 客户端工具类：</p> <p>https://hutool.cn/docs/#/http/Http%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%B7%A5%E5%85%B7%E7%B1%BB-HttpUtil</p> <h3 id="api-签名认证"><a href="#api-签名认证" class="header-anchor">#</a> <code>API</code> 签名认证</h3> <p>本质：</p> <ol><li>签发签名</li> <li>使用签名（校验签名）</li></ol> <p>为什么需要？</p> <ol><li>保证安全性，不能随便一个人调用</li> <li>适用于无需保存登录态的场景。只认签名，不关注用户登录态。</li></ol> <h4 id="签名认证实现"><a href="#签名认证实现" class="header-anchor">#</a> 签名认证实现</h4> <p>通过 <code>http request header</code> 头传递参数。</p> <p>参数 1：<code>accessKey</code>：调用的标识 <code>userA</code>,<code>userB</code>（复杂、无序、无规律）</p> <p>参数 2：<code>secretKey</code>：密钥（复杂、无序、无规律）<strong>该参数不能放到请求头中</strong>（类似用户名和密码，区别：<code>ak</code>、<code>sk</code> 是无状态的）</p> <hr> <blockquote><p>可以自己写代码来给用户生成 <code>ak</code>、<code>sk</code></p></blockquote> <p>千万不能把密钥直接在服务器之间传递，有可能会被拦截</p> <p>参数 3：用户请求参数</p> <p>参数 4：<code>sign</code></p> <hr> <ul><li>加密方式：对称加密、非对称加密、<code>md5</code> 签名（不可解密）</li> <li>用户参数 + 密钥 =&gt; <strong>签名生成算法（<code>MD5</code>、<code>HMAac</code>、<code>Sha1</code>）</strong> =&gt; 不可解密的值 abc + abcdefgh =&gt; sajdgdioajdgioa</li></ul> <p>怎么知道这个签名对不对？</p> <p><strong>服务端用一模一样的参数和算法去生成签名，只要和用户传的一致，就表示一致。</strong></p> <p><strong>怎么防重放？</strong></p> <p>参数 5：加 <code>nonce</code> 随机数，只能用一次</p> <hr> <p>服务端要保存用过的随机数（缺点：增大了开销，所以要给随机数加个有效期）</p> <p>参数 6：加 <code>timestamp</code> 时间戳，校验时间戳是否过期。</p> <hr> <p><strong><code>API</code> 签名认证是一个很灵活的设计，具体要有哪些参数、参数名如何一定要根据场景来。（比如 <code>userId</code>、<code>appId</code>、<code>version</code>、固定值等）</strong></p> <p>思考：难道开发者每次调用接口都要自己写签名算法？</p> <h3 id="开发简单易用的-sdk-简历加分项"><a href="#开发简单易用的-sdk-简历加分项" class="header-anchor">#</a> 开发简单易用的 <code>SDK</code>（简历加分项）</h3> <p>项目名：myapi-client-sdk</p> <h4 id="为什么需要-starter"><a href="#为什么需要-starter" class="header-anchor">#</a> 为什么需要 <code>Starter</code>？</h4> <p>理想情况：开发者只需要关心调用哪些接口、传递哪些参数，就跟自己写的代码一样简单。</p> <p>开发 <code>starter</code> 的好处：开发者引入之后，可以直接在 <code>application.yml</code> 中写配置，自动创建客户端</p> <h4 id="starter-开发流程"><a href="#starter-开发流程" class="header-anchor">#</a> <code>Starter</code> 开发流程</h4> <p>初始化，环境依赖（一定要移除 <code>build</code>）：</p> <p><code>spring-boot-configuration-processor</code> 的作用是<strong>自动生成配置的代码提示</strong>（<code>yml</code> 文件里）</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>         <span class="token comment">&lt;!--在 spring-boot-starter 依赖里包含了--&gt;</span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-autoconfigure<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-configuration-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>编写配置类（启动类）：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ComponentScan</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token comment">//定义一个配置前缀</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;chenmeng.api.client&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CmApiClientConfig</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> accessKey<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> secretKey<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">CmApiClient</span> <span class="token function">cmApiClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CmApiClient</span><span class="token punctuation">(</span>accessKey<span class="token punctuation">,</span> secretKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>注册配置类，<code>resources/META_INF/spring.factories</code> 文件：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code># spring boot starter
org.springframework.boot.autoconfigure.EnableAutoConfiguration=com.chenmeng.CmApiClientConfig
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>mvn install</code> 打包代码为本地依赖包</p> <p>创建新项目，（复用 <code>server</code> 项目）、测试</p> <p>小作业：把打包好的包发送到 <code>maven</code> 仓库中</p> <h2 id="第三阶段"><a href="#第三阶段" class="header-anchor">#</a> 第三阶段</h2> <h3 id="主要内容-3"><a href="#主要内容-3" class="header-anchor">#</a> 主要内容：</h3> <ol><li>开发接口发布 / 下线的功能</li> <li>开发浏览接口、查看接口文档、申请签名功能</li> <li>开发在线调试功能</li></ol> <h3 id="功能开发"><a href="#功能开发" class="header-anchor">#</a> 功能开发</h3> <h4 id="接口发布-下线的功能"><a href="#接口发布-下线的功能" class="header-anchor">#</a> 接口发布 / 下线的功能</h4> <p>权限控制：仅管理员操作</p> <h5 id="业务逻辑"><a href="#业务逻辑" class="header-anchor">#</a> 业务逻辑</h5> <p>发布接口：</p> <ol><li>校验该接口是否存在</li> <li>判断该接口是否可以调用</li> <li>修改接口数据库中的状态字段为 1（考虑：可以设计 0 为默认，1 为开启，2 为关闭）</li></ol> <p>下线接口：</p> <ol><li>校验该接口是否存在</li> <li>修改接口数据库中的状态字段为 0</li></ol> <h4 id="前端浏览接口"><a href="#前端浏览接口" class="header-anchor">#</a> 前端浏览接口</h4> <h5 id="查看接口文档"><a href="#查看接口文档" class="header-anchor">#</a> 查看接口文档</h5> <p>思路：动态路由，用 url 来传递 id ，加载不同的接口信息</p> <h5 id="申请签名"><a href="#申请签名" class="header-anchor">#</a> 申请签名</h5> <p>用户在注册成功时，自动分配 accessKey、secretKey</p> <h5 id="在线调用"><a href="#在线调用" class="header-anchor">#</a> 在线调用</h5> <p>请求参数的类型（直接用 json 类型，更灵活）：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><em>TODO</em></p> <p>先跑通整个接口流程，后续可以针对不同的请求头或者接口类型来设计界面和表单，给用户更好的体验。（可以参考 swagger、postman、knife4j）</p> <h5 id="调用流程"><a href="#调用流程" class="header-anchor">#</a> 调用流程</h5> <p>使用上述流程：</p> <p><img alt="image-20230503194855075" data-src="https://cmty256.github.io/imgs-blog/images/image-20230503194855075.png" loading="lazy" class="lazy"></p> <p>流程：</p> <ol><li>前端将用户输入的请求参数和测试的接口 id 发给平台后端</li> <li>（在调用前可以做一些校验）</li> <li>平台后端去调用模拟接口</li></ol> <h3 id="todo"><a href="#todo" class="header-anchor">#</a> TODO</h3> <p>判断接口是否可以调用时 由固定方法名 改为根据测试地址来调用</p> <p>用户测试接口固定方法名改为根据测试地址来调用</p> <p>模拟接口改为数据库校验 aKey</p> <p>给 请求参数的类型 加多个 type ，目前只有 name</p> <h2 id="第四阶段"><a href="#第四阶段" class="header-anchor">#</a> 第四阶段</h2> <h3 id="主要内容-4"><a href="#主要内容-4" class="header-anchor">#</a> 主要内容：</h3> <ol><li>开发接口调用次数统计功能</li> <li>优化整个系统的架构 - API 网关详解</li></ol> <p>​	a. 网关是什么？</p> <p>​	b. 网关的作用？</p> <p>​	c. 网关的应用场景及实现？</p> <p>​	d. 结合业务去应用网关</p> <h3 id="接口调用次数统计"><a href="#接口调用次数统计" class="header-anchor">#</a> 接口调用次数统计</h3> <p>需求：</p> <ol><li>用户每次调用接口成功，次数 +1 （可以考虑用 -1）</li> <li>给用户分配或者用户自主申请接口调用次数</li></ol> <p>业务流程：</p> <ol><li>用户调用接口（之前已完成）</li> <li>修改数据库，调用次数 +1</li></ol> <p>设计库表</p> <p>用哪个用户？哪个接口？</p> <p>用户 =&gt; 接口（多对多）</p> <p>用户调用接口关系表：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">--- 用户调用接口关系表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> cmapi<span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>user_interface_info<span class="token punctuation">`</span></span>
<span class="token punctuation">(</span>
    <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span> <span class="token keyword">comment</span> <span class="token string">'主键'</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>userId<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'调用用户 id'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>interfaceInfoId<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'接口 id'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>totalNum<span class="token punctuation">`</span></span> <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'总调用次数'</span><span class="token punctuation">,</span>
	  <span class="token identifier"><span class="token punctuation">`</span>leftNum<span class="token punctuation">`</span></span> <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'剩余调用次数'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span> <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'0-正常，1-禁用'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>createTime<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token keyword">default</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'创建时间'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>updateTime<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token keyword">default</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">on</span> <span class="token keyword">update</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">comment</span> <span class="token string">'更新时间'</span><span class="token punctuation">,</span>
    <span class="token identifier"><span class="token punctuation">`</span>isDelete<span class="token punctuation">`</span></span> <span class="token keyword">tinyint</span> <span class="token keyword">default</span> <span class="token number">0</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'是否删除(0-未删，1-已删)'</span>
<span class="token punctuation">)</span> <span class="token keyword">comment</span> <span class="token string">'用户调用接口关系'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>开发步骤：</p> <ol><li>开发基本增删改查（给管理员用）</li> <li>开发用户调用接口次数 +1 的功能（service）</li></ol> <h4 id="问题"><a href="#问题" class="header-anchor">#</a> <strong>问题</strong></h4> <p>如果每个接口的方法都调用次数 +1，是不是比较麻烦？</p> <p>致命问题：接口开发者需要自己去添加统计代码</p> <p><img alt="image-20230506174904962" data-src="https://cmty256.github.io/imgs-blog/images/image-20230506174904962.png" loading="lazy" class="lazy"></p> <ul><li><p>使用 AOP 切面的优点：独立于接口，在每个接口调用后统计次数 +1</p></li> <li><p>使用 AOP 切面的缺点：只存在于单个项目中，如果每个团队都要开发自己模拟接口，那么都要写一个切面</p></li></ul> <h3 id="网关"><a href="#网关" class="header-anchor">#</a> 网关</h3> <p>什么是网关？理解成火车站的检票口，<strong>统一</strong>去检票。</p> <h4 id="网关作用"><a href="#网关作用" class="header-anchor">#</a> 网关作用</h4> <p>统一去进行一些操作、处理一些问题。</p> <p>比如：</p> <ol><li><p>路由</p></li> <li><p>负载均衡</p></li> <li><p>统一鉴权</p></li> <li><p>跨域</p></li> <li><p>统一业务处理（缓存也在这里处理）</p></li> <li><p>访问控制</p></li> <li><p>发布控制</p></li> <li><p>流量染色</p></li> <li><p>接口保护</p> <p>a. 限制请求</p> <p>b. 信息脱敏（操作请求头，响应头）</p> <p>c. 降级（熔断）-- 请求某个接口时不成功，提示请求其它接口，兜底效果</p> <p>d. 限流：学习令牌桶算法、学习漏桶算法，学习一下 RedisLimitHandler</p> <p>e. 超时时间</p></li> <li><p>统一日志</p></li> <li><p>统一文档</p></li></ol> <p><strong>具体作用</strong></p> <h5 id="路由"><a href="#路由" class="header-anchor">#</a> <strong>路由</strong></h5> <p>起到转发的作用，比如有接口 A 和接口 B，网关会记录这些信息，根据用户访问的地址和参数，<strong>转发请求</strong>到对应的接口（服务器/集群）</p> <p>/a =&gt; 接口 A</p> <p>/b =&gt; 接口 B</p> <p>https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gateway-request-predicates-factories</p> <h5 id="负载均衡"><a href="#负载均衡" class="header-anchor">#</a> 负载均衡</h5> <p>在路由的基础上</p> <p>/c =&gt; 服务A/集群A（随机转发到其中的某一机器）</p> <p>uri 从固定地址改成 Ib:xxxx</p> <h5 id="统一鉴权"><a href="#统一鉴权" class="header-anchor">#</a> <strong>统一鉴权</strong></h5> <p>判断用户是否有权限进行操作，无论访问什么接口，我都统一去判断权限，不用重复写</p> <h5 id="统一处理跨域"><a href="#统一处理跨域" class="header-anchor">#</a> 统一处理跨域</h5> <p>网关统一处理跨域，不用在每个项目里单独处理</p> <p>https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#cors-configuration</p> <h5 id="统一业务处理"><a href="#统一业务处理" class="header-anchor">#</a> <strong>统一业务处理</strong></h5> <p>把每个项目中都要做的通用逻辑放到上层（网关），统一处理，比如本项目的次数统计</p> <h5 id="访问控制"><a href="#访问控制" class="header-anchor">#</a> <strong>访问控制</strong></h5> <p>黑白名单，比如限制DDOS IP</p> <h5 id="发布控制"><a href="#发布控制" class="header-anchor">#</a> 发布控制</h5> <p>灰度发布，比如上线新接口，先给新接口分配 20% 的流量，老接口 80%，再慢慢调整比重。（不同人的软件最新版不一样）</p> <p>https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#the-weight-route-predicate-factory</p> <h5 id="流量染色"><a href="#流量染色" class="header-anchor">#</a> 流量染色</h5> <p>给请求（流量）添加一些标识，一般是设置请求头中，添加新的请求头
https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#the-addrequestheader-gatewayfilter-factory</p> <p><strong>全局染色</strong>：https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#default-filters</p> <h5 id="统一接口保护"><a href="#统一接口保护" class="header-anchor">#</a> <strong>统一接口保护</strong></h5> <ol><li><p>限制请求</p> <p>https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#requestheadersiz-gatewayfilter-factory</p></li> <li><p>信息脱敏</p> <p>https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#the-removerequestheader-gatewayfilter-factory</p></li> <li><p>降级（熔断） 进行兜底</p> <p>https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#fallback-headers</p></li> <li><p>限流</p> <p>https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#the-requestratelimiter-gatewayfilter-factory</p></li> <li><p>超时时间    超时就中断</p> <p>https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#http-timeouts-configuration</p></li> <li><p>重试（业务保护）：</p> <p>https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#the-retry-gatewayfilter-factory</p></li></ol> <h5 id="统一日志"><a href="#统一日志" class="header-anchor">#</a> 统一日志</h5> <p>统一的请求，响应信息记录</p> <h5 id="统一文档"><a href="#统一文档" class="header-anchor">#</a> 统一文档</h5> <p>将下游项目的文档进行聚合，在一个页面统一查看</p> <p>建议用：https://doc.xiaominfo.com/docs/middleware-sources/aggregation-introduction</p> <h4 id="网关的分类"><a href="#网关的分类" class="header-anchor">#</a> 网关的分类</h4> <ul><li>**全局网关（接入层网关）**作用是负载均衡、请求日志等，不和业务逻辑绑定</li> <li>**业务网关（微服务网关）**会有一些业务逻辑，作用是将请求转发到不同的业务/项目/接口/服务</li></ul> <p>参考文章：https://blog.csdn.net/qq_21040559/article/details/122961395</p> <h4 id="网关实现"><a href="#网关实现" class="header-anchor">#</a> <strong>网关实现</strong></h4> <ol><li><strong>Nginx</strong> （全局网关），<strong>Kong网关</strong>（API网关），<strong>编程成本相对较高</strong></li> <li><strong>Spring Cloud Gateway</strong>（取代了 Zuul ）性能高 可以用 java 代码来写逻辑  适于学习</li></ol> <p>网关技术选型：https://zhuanlan.zhihu.com/p/500587132</p> <h3 id="spring-cloud-gateway-用法"><a href="#spring-cloud-gateway-用法" class="header-anchor">#</a> Spring Cloud Gateway 用法</h3> <p>全部内容基本来自官网</p> <p>官网：https://spring.io/projects/spring-cloud-gateway</p> <p>官方文档：https://docs.spring.io/spring-cloud-gateway/docs/current/reference//html/</p> <h4 id="核心概念"><a href="#核心概念" class="header-anchor">#</a> 核心概念</h4> <p>路由 <strong>Route</strong>：（根据什么条件，转发请求到哪里）</p> <p>断言 <strong>Predicate</strong>：一组规则、条件，用来确定如何转发路由</p> <p>过滤器 <strong>Filter</strong>：对请求进行一系列的处理，比如添加请求头、添加请求参数</p> <p>请求流程：</p> <ol><li>客户端发起请求</li> <li>Handler Mapping：根据断言，去将请求转发到对应的路由</li> <li>Web Handler：处理请求（一层层经过过滤器）</li> <li>实际调用服务</li></ol> <p><img alt="image-20230509171132036" data-src="https://cmty256.github.io/imgs-blog/images/image-20230509171132036.png" loading="lazy" class="lazy"></p> <h4 id="两种配置方式"><a href="#两种配置方式" class="header-anchor">#</a> 两种配置方式</h4> <ol><li><p>配置式（声明式，方便、规范）</p> <p>a. 简化版</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> after_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Cookie=mycookie<span class="token punctuation">,</span>mycookievalue
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>b. 全称版</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> after_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Cookie
          <span class="token key atrule">args</span><span class="token punctuation">:</span>
            <span class="token key atrule">name</span><span class="token punctuation">:</span> mycookie
            <span class="token key atrule">regexp</span><span class="token punctuation">:</span> mycookievalue
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li> <li><p>编程式（灵活、相对麻烦）</p></li></ol> <h4 id="建议开启日志"><a href="#建议开启日志" class="header-anchor">#</a> 建议开启日志</h4> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">logging</span><span class="token punctuation">:</span>
	<span class="token key atrule">level</span><span class="token punctuation">:</span>
		<span class="token key atrule">org</span><span class="token punctuation">:</span>
			<span class="token key atrule">springframework</span><span class="token punctuation">:</span>
				<span class="token key atrule">cloud</span><span class="token punctuation">:</span>
					<span class="token key atrule">gateway</span><span class="token punctuation">:</span> trace
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="断言"><a href="#断言" class="header-anchor">#</a> 断言</h4> <p>官网地址:https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gateway-request-predicates-factories</p> <p>目录：</p> <ol><li>After 在 xx 时间之后</li> <li>Before 在 xx 时间之前</li> <li>Between 在 xx 时间之间</li> <li>请求类别</li> <li>请求头（包含 Cookie）</li> <li>查询参数</li> <li>客户端地址</li> <li><strong>权重</strong></li></ol> <p><strong>The After Route Predicate Factory</strong></p> <p>当前时间在这个时间<strong>之后</strong>，就会访问当前这个路由</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> after_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> After=2017<span class="token punctuation">-</span>01<span class="token punctuation">-</span>20T17<span class="token punctuation">:</span>42<span class="token punctuation">:</span>47.789<span class="token punctuation">-</span>07<span class="token punctuation">:</span>00<span class="token punctuation">[</span>America/Denver<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>The Before Route Predicate Factory</strong></p> <p>当前时间在这个时间<strong>之前</strong>，就会访问当前这个路由</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> before_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Before=2017<span class="token punctuation">-</span>01<span class="token punctuation">-</span>20T17<span class="token punctuation">:</span>42<span class="token punctuation">:</span>47.789<span class="token punctuation">-</span>07<span class="token punctuation">:</span>00<span class="token punctuation">[</span>America/Denver<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>The Between Route Predicate Factory</strong></p> <p>当前时间在这个时间<strong>之间</strong>，就会访问当前这个路由</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> between_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Between=2017<span class="token punctuation">-</span>01<span class="token punctuation">-</span>20T17<span class="token punctuation">:</span>42<span class="token punctuation">:</span>47.789<span class="token punctuation">-</span>07<span class="token punctuation">:</span>00<span class="token punctuation">[</span>America/Denver<span class="token punctuation">]</span><span class="token punctuation">,</span> 2017<span class="token punctuation">-</span>01<span class="token punctuation">-</span>21T17<span class="token punctuation">:</span>42<span class="token punctuation">:</span>47.789<span class="token punctuation">-</span>07<span class="token punctuation">:</span>00<span class="token punctuation">[</span>America/Denver<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>The Cookie Route Predicate Factory</strong></p> <p>如果你的<strong>请求头cookie</strong>的是<strong>chocolate</strong>，它的值是<strong>ch.p</strong>，就会访问当前这个路由</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> cookie_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Cookie=chocolate<span class="token punctuation">,</span> ch.p
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>The Header Route Predicate Factory</strong></p> <p>如果你的<strong>请求头</strong>包含<strong>X-Request-Id</strong>这样一个请求头，并且，它的值符合<strong>正则表达式的规则</strong>，就会访问当前这个路由</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> header_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Header=X<span class="token punctuation">-</span>Request<span class="token punctuation">-</span>Id<span class="token punctuation">,</span> \d+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>The Host Route Predicate Factory</strong></p> <p>如果你的<strong>访问</strong>的是这个**.somehost.org,**.<strong>anotherhost.org</strong>，<strong>域名</strong>，就会访问当前这个路由</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> host_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Host=<span class="token important">**.somehost.org</span><span class="token punctuation">,</span><span class="token important">**.anotherhost.org</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>The Method Route Predicate Factory</strong></p> <p>如果你的<strong>请求类别</strong>是这个<strong>GET</strong>、<strong>POST</strong>，就会访问当前这个路由</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> method_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Method=GET<span class="token punctuation">,</span>POST

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>The Path Route Predicate Factory</strong></p> <p>如果你的<strong>访问的地址</strong>是以这些**/red/{segment},/blue/{segment}**路径作为前缀，就会访问当前这个路由</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> path_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Path=/red/<span class="token punctuation">{</span>segment<span class="token punctuation">}</span><span class="token punctuation">,</span>/blue/<span class="token punctuation">{</span>segment<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>The Query Route Predicate Factory</strong></p> <p>根据<strong>查询条件</strong>，比如red greet green，就会访问当前这个路由</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> query_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Query=red<span class="token punctuation">,</span> gree.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>The RemoteAddr Route Predicate Factory</strong></p> <p>根据<strong>远程地址</strong>，比如你的用户的ip地址是192.168.1.1/24，就会访问当前这个路由</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> remoteaddr_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> RemoteAddr=192.168.1.1/24
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>The Weight Route Predicate Factory</strong></p> <p>根据你设置的<strong>权重</strong>，给你把同一个访问的地址，重定到不同的服务，轻松实现发布控制</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> weight_high
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//weighthigh.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Weight=group1<span class="token punctuation">,</span> <span class="token number">8</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> weight_low
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//weightlow.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> Weight=group1<span class="token punctuation">,</span> <span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>The XForwarded Remote Addr Route Predicate Factory</strong></p> <p>从请求头中如果拿到XForwarded这个<strong>请求头的地址</strong>192.168.1.1/24 就会访问当前这个路由</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> xforwarded_remoteaddr_route
        <span class="token key atrule">uri</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//example.org
        <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> XForwardedRemoteAddr=192.168.1.1/24
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="过滤器"><a href="#过滤器" class="header-anchor">#</a> 过滤器</h4> <p><strong>官网文档</strong>：https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gatewayfilter-factories</p> <p><strong>基本功能</strong>：对请求头、请求参数、响应头的增删改查
1.添加清求头
2.添加请求参数
3.添加响应头	
4.降级
5.限流
6.重试</p> <p>引入依赖：</p> <p>用于集成Reactor Resilience4j断路器库，以实现微服务的容错处理和服务熔断（接口保护 -- 降级）等功能。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-circuitbreaker-reactor-resilience4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>小作业：</strong></p> <p>通过阅读源码：https://spring.io/projects/spring-cloud-gateway/#samples 来了解gateway编程式开发</p> <h2 id="第五阶段"><a href="#第五阶段" class="header-anchor">#</a> 第五阶段</h2> <h3 id="主要内容-5"><a href="#主要内容-5" class="header-anchor">#</a> 主要内容：</h3> <ol><li>实现统一的接口鉴权和计费（API 网关实践）</li></ol> <p>实现统一的用户鉴权 ，统一的接口调用次数统计（把API网关用到项目中）</p> <h3 id="要用到的特性"><a href="#要用到的特性" class="header-anchor">#</a> <strong>要用到的特性</strong></h3> <ol><li>路由（转发请求到模拟接口项目）</li> <li><s>负载均衡（需要用到注册中心）</s></li> <li>统一鉴权(accessKey，secretKey)</li> <li>统一处理跨域</li> <li>统一业务处理（每次请求接口后，接口调用次数+1）</li> <li>访问控制（黑白名单）</li> <li><s>发布控制</s></li> <li>流量染色(记录请求是否为网关来的)</li> <li><s>统一接口保护</s> <ol><li>限制请求</li> <li>信息脱敏</li> <li>降级（熔断）</li> <li>限流 学习令牌桶算法，学习露桶算法，学习一下RedislimitHandler</li> <li>超时时间</li> <li>重试（业务保护）</li></ol></li> <li>统一日志(记录每次的请求和响应)</li> <li><s>统一文档</s></li></ol> <h3 id="业务逻辑-2"><a href="#业务逻辑-2" class="header-anchor">#</a> 业务逻辑</h3> <ol><li><p>用户发送请求到 API 网关</p> <p>（面试官可能会问：为什么要用 API 网关？可以联想一下上面那个画图过程）</p></li> <li><p>请求日志</p></li> <li><p>（黑白名单）</p></li> <li><p>用户鉴权（判断 ak、sk 是否合法）</p></li> <li><p>请求的模拟接口是否存在？</p></li> <li><p><strong>请求转发，调用模拟接口</strong></p></li> <li><p>响应日志</p></li> <li><p>调用成功，接口调用次数 + 1</p></li> <li><p>调用失败，返回一个规范的错误码</p></li></ol> <h3 id="具体实现"><a href="#具体实现" class="header-anchor">#</a> 具体实现</h3> <h4 id="_1、请求转发"><a href="#_1、请求转发" class="header-anchor">#</a> 1、请求转发</h4> <p>使用 Path 前缀匹配断言：</p> <p>将所有前缀为：/api/ 的请求进行转发，转发到http://localhost:8123/api</p> <p>比如请求网关：<a href="http://localhost:8090/api/name/%E5%BC%A0%E4%B8%89" target="_blank" rel="noopener noreferrer">localhost:8090/api/name/张三<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>转发到 <a href="http://localhost:8123/api/name/%E5%BC%A0%E4%B8%89" target="_blank" rel="noopener noreferrer">localhost:8123/api/name/张三<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8090</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>
      <span class="token key atrule">routes</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> api_route
          <span class="token comment"># 设置转发到哪个网址</span>
          <span class="token key atrule">uri</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8123</span>
          <span class="token comment"># 前缀断言</span>
          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> Path=/api/<span class="token important">**</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="_2、编写业务逻辑"><a href="#_2、编写业务逻辑" class="header-anchor">#</a> 2、编写业务逻辑</h4> <p>使用了 GlobalFilter(编程式，还有一种叫配置式，上面有讲)，全局请求拦截处理（类似 AOP）</p> <p>官网：https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#global-filters</p> <p>因为网关项目没引入 MyBatis 等操作数据库的类库，如果该操作较为复杂，可以由 backend 增删改查项目提供接口，我们直接调用，不用重复写逻辑了。</p> <ul><li>HTTP 请求（用 HTTPClient、用 RestTemplate、Feign）</li> <li>RPC（Dubbo）</li></ul> <h4 id="问题-2"><a href="#问题-2" class="header-anchor">#</a> 问题</h4> <p>预期等模拟接口调用完成，才记录响应日志、统计调用次数。</p> <p>但现实是 chain.filter 方法立刻返回了，直到 filter 过滤器 return 后（此时已经记录了响应日志）才调用了模拟接口。</p> <p>**原因是：**chain.filter 是个异步操作，理解为前端的 promise</p> <p>**解决方案：**利用 response 装饰者，<strong>增强</strong>原有 response 的处理能力</p> <p>参考博客：https://blog.csdn.net/qq_19636353/article/details/126759522（以这个为主）</p> <p>其他参考：</p> <ul><li><a href="https://blog.csdn.net/m0_67595943/article/details/124667975" target="_blank" rel="noopener noreferrer">网关 在GlobalFilter 拿出返回数据response<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/zx156955/article/details/121670681" target="_blank" rel="noopener noreferrer">SpringCloud-Gateway统一处理返回参数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/qq_39529562/article/details/108911983" target="_blank" rel="noopener noreferrer">对请求参数解密，返回参数加密处理_springcloud 针对全局返回报文加密<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="第六阶段"><a href="#第六阶段" class="header-anchor">#</a> 第六阶段</h2> <h3 id="主要内容-6"><a href="#主要内容-6" class="header-anchor">#</a> 主要内容：</h3> <ol><li>实现统一的接口鉴权和计费（RPC、Dubbo讲解）</li></ol> <h3 id="网关业务逻辑"><a href="#网关业务逻辑" class="header-anchor">#</a> 网关业务逻辑</h3> <p>问题：网关项目比较存粹，没有操作数据库的包，并且还要调用我们之前写过的代码？复制粘贴维护麻烦
理想：直接请求到其他项目的方法</p> <h4 id="怎么调用其他项目的方法"><a href="#怎么调用其他项目的方法" class="header-anchor">#</a> <strong>怎么调用其他项目的方法？</strong></h4> <ol><li>复制代码和依赖，环境</li> <li>HTTP请求（提供接口，供其他项目调用）</li> <li>RPC（Remote Procedure Call）远程过程调用</li> <li>把公共的代码打个jar包，其他项目去引用</li></ol> <blockquote><p>面试常问：HTTP 请求和 RPC 有什么区别</p></blockquote> <h4 id="http-请求怎么调用"><a href="#http-请求怎么调用" class="header-anchor">#</a> <strong>HTTP 请求怎么调用？</strong></h4> <ol><li>提供方提供一个接口（地址，请求方法，参数，返回值）</li> <li>调用方使用 HTTP Client 之类的代码包去发送 HTTP 请求</li></ol> <h3 id="rpc"><a href="#rpc" class="header-anchor">#</a> <strong>RPC</strong></h3> <p>作用：像调用本地方法一样去调用远程方法</p> <p><strong>和直接 HTTP 调用的区别，RPC 优点：</strong></p> <ol><li>对开发者更透明,减少很多的沟通成本</li> <li>RPC 向远程服务器发送请求时，未必使用 HTTP 协议，比如还可以使用 TCP/IP，性能更高。（内部服务更实适用）</li></ol> <p>RPC 调用模型：</p> <p><img alt="image-20230514220826747" data-src="https://cmty256.github.io/imgs-blog/images/image-20230514220826747.png" loading="lazy" class="lazy"></p> <p><strong>注意： 这里注册中心只提供信息，并不会帮助调用，实际调用还是提供者那边</strong></p> <h3 id="dubbo-框架-rpc-实现"><a href="#dubbo-框架-rpc-实现" class="header-anchor">#</a> Dubbo 框架（RPC 实现）</h3> <p>其他 RPC 框架：GRPC、TRPC</p> <p>最好的学习方式：阅读官方文档</p> <p>https://dubbo.incubator.apache.org/zh/docs3-v2/java-sdk/quick-start/spring-boot/</p> <h4 id="两种使用方式"><a href="#两种使用方式" class="header-anchor">#</a> 两种使用方式</h4> <ol><li>Spring Boot代码（注解+编程式）：写Java接口，服务提供者和消费者都去引用这个接口
偏程导</li> <li>DL(接口调用语言)：创建一个公共的接口定义文件，服务提供者和消费者读取这个文件。优点是跨语言，所有的框架都认识</li></ol> <p>底层是Triple协议：
https://dubbo.incubator.apache.org/zh/docs3-v2/java-sdk/concepts-and-architecture/triple/</p> <h4 id="官方的示例项目学习"><a href="#官方的示例项目学习" class="header-anchor">#</a> 官方的示例项目学习</h4> <p>zookeeper 注册中心：通过内嵌的方式运行，更方便</p> <p>最先启动注册中心（EmbeddedZooKeeper，内嵌的注册中心），然后启动服务提供者（ProviderApplication），再启动服务消费者（ConsumerApplication）</p> <h4 id="整合运用"><a href="#整合运用" class="header-anchor">#</a> 整合运用</h4> <ol><li>backend项目作为<strong>服务提供者</strong>，提供3个方法：
<ol><li>实际情况应该是去数据库中查是否已分配给用户</li> <li>从数据库中查询模拟接口是否存在，以及请求方法是否匹配（还可以校验请求参数）</li> <li>调用成功，接口调用次数+1 invokeCount</li></ol></li> <li>gateway项日作为<strong>服务调用者</strong>，调用这3个方法</li></ol> <p>zooKeeper 会有版本问题，解决起来比较麻烦</p> <p>建议用 Nacos！</p> <p>整合 Nacos 注册中心：https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/registry/nacos/</p> <p><strong>注意：</strong></p> <ol><li>服务接口类必须要在同一个包下，建议是抽象出一个公共项目（放接口、实体类等）</li> <li>设置注解（比如启动类的 EnableDubbo、接口实现类和 Bean 引用的注解）</li> <li>添加配置</li> <li>服务调用项目和提供者项目尽量引入相同的依赖和配置</li></ol> <p><strong>添加依赖</strong></p> <p>依赖从官方示例项目中复制粘贴过来的不行，要从 maven 仓库中找来相应的版本依赖</p> <p>在 cmapi-backend、cmapi-gateway 中添加如下依赖</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.nacos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>nacos-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="第七阶段"><a href="#第七阶段" class="header-anchor">#</a> 第七阶段</h2> <h3 id="主要内容-7"><a href="#主要内容-7" class="header-anchor">#</a> 主要内容：</h3> <ol><li>开发抽象公共服务</li> <li>实现网关核心业务流程</li> <li>开发管理员接口分析功能</li> <li>上线分析和扩展</li></ol> <h3 id="梳理网关业务逻辑"><a href="#梳理网关业务逻辑" class="header-anchor">#</a> 梳理网关业务逻辑</h3> <p>以下操作可以复用：</p> <ol><li>去数据库中查是否已分配给用户秘钥（ak、sk 是否合法）
<ul><li>先根据 ak 判断用户是否存在，查到 secretKey</li> <li>对比 sk 和用户传的加密后的 sk 是否一致</li></ul></li> <li>从数据库中查询模拟接口是否存在，以及请求方法是否匹配（还可以校验请求参数）</li> <li>调用成功，接口调用次数+ 1 invokeCount</li></ol> <h3 id="临时问题-如何获取接口转发服务器的地址"><a href="#临时问题-如何获取接口转发服务器的地址" class="header-anchor">#</a> 临时问题：如何获取接口转发服务器的地址</h3> <p>思路：网关启动时，获取所有的接口信息，维护到内存的 hashmap 中；有请求时，根据请求的 url 路径或者其他参数（比如 host 请求头）来判断应该转发到哪台服务器、以及用于校验接口是否存在</p> <h3 id="抽象公共服务"><a href="#抽象公共服务" class="header-anchor">#</a> 抽象公共服务</h3> <p>项目名: cmapi-common
目的是让方法、实体类在多个项目间复用，减少重复编写</p> <p>服务抽取:</p> <ol><li>数据库中查是否已分配给用户秘钥 (根据 accessKey 拿到用户信息，返回用户信息，为空表示不存在)</li> <li>从数据库中查询模拟接口是否存在(请求路径、请求方法、请求参数，返回接口信息，为空表示不存在)</li> <li>接口调用次数 + 1invokeCount (accessKey、secretKey (标识用户)，请求接口路径</li></ol> <p>步骤:</p> <ol><li>新建干净的 maven 项目，只保留必要的公共依赖</li> <li>抽取 service 和实体类</li> <li>install 本地 maven 包</li> <li>让服务提供者引入 common 包，测试是否正常运行</li> <li>让服务消费者引入 common 包</li></ol> <h3 id="统计分析功能"><a href="#统计分析功能" class="header-anchor">#</a> 统计分析功能</h3> <h4 id="需求"><a href="#需求" class="header-anchor">#</a> 需求</h4> <p>各接口的总调用次数占比(饼图)取调用最多的前 3 个接口，从而分析出哪些接口没有人用(降低资源、或者下线)，高频接口(增加资源、提高收费)用饼图展示。
Hs实现</p> <h5 id="前端-2"><a href="#前端-2" class="header-anchor">#</a> 前端</h5> <p>强烈推荐用现成的库!!!
比如:</p> <ul><li>ECharts: https://echarts.apache.org/zh/index.html (推荐)</li> <li>AntV: https://antv.vision/zh (推荐)</li> <li>BizCharts</li></ul> <p>用法贼简单!
1.看官网
2。找到快速入门、按文档去引入库
3.进入示例页面
4。找到你要的图
5.在线调试
6.复制代码
7.改为真实数据</p> <p>如果是 React 项目，用这个库: https://github.com/hustcc/echarts-for-react</p> <h5 id="后端-2"><a href="#后端-2" class="header-anchor">#</a> 后端</h5> <p>写一个接口，得到下列示例数据:
接口 A: 2次
接口 B: 3次</p> <p>步骤:
1、SOL 查的调用数据: select interfacelnfold. sum/totalNum) as totalNum from user interface infogroup by interfacelnfold order by totalNum desc limit 3.
2、业务层去关联查询接口信息</p> <h3 id="上线计划"><a href="#上线计划" class="header-anchor">#</a> 上线计划</h3> <p>前端: 参考之前用户中心或伙伴匹配系统的上线方式
后端:</p> <ul><li>backend 项目: web 项目，部署 spring boot 的jar 包(对外的)</li> <li>gateway 网关项目: web 项目，部署 spring boot 的jar 包 (对外的)interface 模拟接口项目: web 项目，部署 spring boot 的iar 包(建议对外暴露的)</li></ul> <p><strong>关键: 网络必须要连通</strong>
如果自己学习用: 单个服务器部署这三个项目就足够</p> <p>如果你是搞大事，多个服务器建议在 <strong>同一内网</strong>，内网交互会更快、且更安全</p> <h3 id="扩展思路"><a href="#扩展思路" class="header-anchor">#</a> 扩展思路</h3> <p><strong>1. 用户可以申请更换签名</strong></p> <p><strong>2. 怎么让其他用户也上传接口?</strong></p> <ul><li><p>需要提供一个机制(界面)，让用户输入自己的接口 host (服务器地址) 、接口信息，将接口信息写入数据库。可以在 interfacelnfo 表里加个 host 字段，区分服务器地址，让接口提供者更灵活地接入系统。</p></li> <li><p>将接口信息写入数据库之前，要对接口进行校验(比如检查他的地址是否遵循规则，测试调用)，保证他是正常的。</p></li> <li><p>将接口信息写入数据库之前遵循咱们的要求(并且使用咱们的 sdk)，</p></li> <li><p>在接入时，平台需要测试调用这个接口，保证他是正常的。</p></li></ul> <p><strong>3. 网关校验是否还有调用次数</strong>
需要考虑并发问题，防止瞬间调用超额</p> <p><strong>4. 网关优化</strong>
比如增加限流/降级保护，提高性能等。还可以考搭配 Nginx 网关使用。</p> <p><strong>5. 功能增强</strong>
可以针对不同的请求头或者接口类型来设计前端界面和表单，便于用户调用，获得更好的体验。可以参考 swagger、postman、knife4j 的页面</p></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2025/4/3 17:16:48</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/fa01b6/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">功能涵盖</div></a> <a href="/pages/292456/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">笔记</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/fa01b6/" class="prev">功能涵盖</a></span> <span class="next"><a href="/pages/292456/">笔记</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="mailto:2691357857@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/cmty256" title="Github" target="_blank" class="iconfont icon-github"></a><a href="https://blog.csdn.net/qq_54088234?spm=1011.2124.3001.5343" title="CSDN" target="_blank" class="iconfont icon-csdn"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2025
    <span>沉梦听雨 | <a href="https://gitee.com/dream-deeply-tyu" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><canvas id="vuepress-canvas-cursor"></canvas><!----><div></div></div></div>
    <script src="/assets/js/app.cded0381.js" defer></script><script src="/assets/js/2.02bc9df6.js" defer></script><script src="/assets/js/277.f79747f5.js" defer></script><script src="/assets/js/6.9155b086.js" defer></script>
  </body>
</html>
