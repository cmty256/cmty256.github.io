(window.webpackJsonp=window.webpackJsonp||[]).push([[228],{556:function(r,t,_){"use strict";_.r(t);var v=_(1),e=Object(v.a)({},(function(){var r=this,t=r._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":r.$parent.slotKey}},[t("h1",{attrs:{id:"定时任务基础入门"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#定时任务基础入门"}},[r._v("#")]),r._v(" 定时任务基础入门")]),r._v(" "),t("h2",{attrs:{id:"可选择方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#可选择方案"}},[r._v("#")]),r._v(" 可选择方案")]),r._v(" "),t("p",[t("strong",[r._v("在 Spring 体系中，内置了两种定时任务的解决方案")]),r._v("：")]),r._v(" "),t("ol",[t("li",[r._v("第一种，"),t("a",{attrs:{href:"https://github.com/spring-projects/spring-framework",target:"_blank",rel:"noopener noreferrer"}},[r._v("Spring Framework"),t("OutboundLink")],1),r._v(" 的 "),t("a",{attrs:{href:"https://github.com/spring-projects/spring-framework/tree/master/spring-core/src/main/java/org/springframework/core/task",target:"_blank",rel:"noopener noreferrer"}},[r._v("Spring Task"),t("OutboundLink")],1),r._v(" 模块，提供了"),t("strong",[r._v("轻量级")]),r._v("的定时任务的实现。")]),r._v(" "),t("li",[r._v("第二种，"),t("a",{attrs:{href:"https://github.com/spring-projects/spring-boot",target:"_blank",rel:"noopener noreferrer"}},[r._v("Spring Boot"),t("OutboundLink")],1),r._v(" 2.0 版本，整合了 "),t("a",{attrs:{href:"http://www.quartz-scheduler.org/",target:"_blank",rel:"noopener noreferrer"}},[r._v("Quartz"),t("OutboundLink")],1),r._v(" 作业调度框架，提供了"),t("strong",[r._v("功能强大")]),r._v("的定时任务的实现。\n"),t("ul",[t("li",[r._v("Spring Framework 已经内置了 Quartz 的整合。Spring Boot 1.X 版本未提供 Quartz 的自动化配置，而 2.X 版本提供了支持。")])])])]),r._v(" "),t("p",[t("strong",[r._v("开源的调度任务中间件")]),r._v("：")]),r._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[t("p",[t("a",{attrs:{href:"http://elasticjob.io/",target:"_blank",rel:"noopener noreferrer"}},[r._v("Elastic-Job"),t("OutboundLink")],1)]),r._v(" "),t("ul",[t("li",[r._v("唯品会基于 Elastic-Job 之上，演化出了 "),t("a",{attrs:{href:"https://github.com/vipshop/Saturn",target:"_blank",rel:"noopener noreferrer"}},[r._v("Saturn"),t("OutboundLink")],1),r._v(" 项目。")])])]),r._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://dolphinscheduler.apache.org/zh-cn/",target:"_blank",rel:"noopener noreferrer"}},[r._v("Apache DolphinScheduler"),t("OutboundLink")],1)])]),r._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://www.xuxueli.com/xxl-job/",target:"_blank",rel:"noopener noreferrer"}},[r._v("XXL-JOB"),t("OutboundLink")],1)])])]),r._v(" "),t("blockquote",[t("p",[r._v("目前国内采用 Elastic-Job 和 XXL-JOB 为主。")]),r._v(" "),t("p",[r._v("使用 XXL-JOB 的团队可能会更多一些，主要是上手较为容易，运维功能更为完善。")])]),r._v(" "),t("h2",{attrs:{id:"cron-表达式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cron-表达式"}},[r._v("#")]),r._v(" cron 表达式")]),r._v(" "),t("h3",{attrs:{id:"格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#格式"}},[r._v("#")]),r._v(" 格式")]),r._v(" "),t("p",[r._v("cron 表达式是一种用于配置定时任务（计划任务）的字符串，它由"),t("strong",[r._v("六个或七个")]),r._v("字段组成，表示时间表，格式如下：")]),r._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[r._v("// 秒 分 时 日 月 星期 年 ")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("*")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("*")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("*")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("*")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("*")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("*")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("?")]),r._v("\n")])]),r._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[r._v("1")]),t("br"),t("span",{staticClass:"line-number"},[r._v("2")]),t("br")])]),t("h3",{attrs:{id:"字段含义"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#字段含义"}},[r._v("#")]),r._v(" 字段含义")]),r._v(" "),t("p",[r._v("每个字段由一个星号（"),t("code",[r._v("*")]),r._v("）或具体值组成，字段之间用空格分隔。以下是每个字段的含义：")]),r._v(" "),t("ol",[t("li",[t("p",[t("strong",[r._v("秒（0 - 59）")]),r._v(":")]),r._v(" "),t("ul",[t("li",[r._v("任务执行的秒数，可以是单个数字，范围列表，或特殊字符。")])])]),r._v(" "),t("li",[t("p",[t("strong",[r._v("分（0 - 59）")]),r._v(":")]),r._v(" "),t("ul",[t("li",[r._v("任务执行的分钟数。")])])]),r._v(" "),t("li",[t("p",[t("strong",[r._v("小时（0 - 23）")]),r._v(":")]),r._v(" "),t("ul",[t("li",[r._v("任务执行的小时数。")])])]),r._v(" "),t("li",[t("p",[t("strong",[r._v("日期（1 - 31）")]),r._v(":")]),r._v(" "),t("ul",[t("li",[r._v("任务执行的月份中的日期。")])])]),r._v(" "),t("li",[t("p",[t("strong",[r._v("月份（1 - 12 或 JAN-DEC）")]),r._v(":")]),r._v(" "),t("ul",[t("li",[r._v("任务执行的月份。")])])]),r._v(" "),t("li",[t("p",[t("strong",[r._v("星期几（0 - 7 或 SUN-SAT）")]),r._v(":")]),r._v(" "),t("ul",[t("li",[r._v("任务执行的星期几，0 或 7 表示星期日。")])])]),r._v(" "),t("li",[t("p",[t("strong",[r._v("年份（可选字段）")]),r._v(":")]),r._v(" "),t("ul",[t("li",[r._v("如果需要指定年份，可以在表达式的末尾添加年份字段。")])])])]),r._v(" "),t("h3",{attrs:{id:"特殊字符"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#特殊字符"}},[r._v("#")]),r._v(" 特殊字符")]),r._v(" "),t("p",[t("em",[r._v("特殊字符包括：")])]),r._v(" "),t("ol",[t("li",[r._v("星号（"),t("code",[r._v("*")]),r._v("）: 表示匹配"),t("strong",[r._v("任意值")]),r._v("。例如，* 在分钟字段中表示每分钟都执行。")]),r._v(" "),t("li",[r._v("问号（"),t("code",[r._v("?")]),r._v("）: 表示"),t("strong",[r._v("不指定值")]),r._v("，通常用在"),t("code",[r._v("日期")]),r._v("和"),t("code",[r._v("星期几")]),r._v("字段，通常用于避免冲突。")]),r._v(" "),t("li",[r._v("连字符（"),t("code",[r._v("-")]),r._v("）: 表示一个"),t("strong",[r._v("范围")]),r._v("，例如 "),t("code",[r._v("10-12")]),r._v(" 表示从 10 到 12。")]),r._v(" "),t("li",[r._v("斜线（"),t("code",[r._v("/")]),r._v("）: 表示"),t("strong",[r._v("起始时间开始，每隔一定的间隔执行")]),r._v("，例如 "),t("code",[r._v("0/30")]),r._v(" 表示每 30 分钟。")]),r._v(" "),t("li",[r._v("逗号（"),t("code",[r._v(",")]),r._v("）：用于分隔多个值。例如，1,3,5 在小时字段中表示 1 点、3 点和 5 点执行。")]),r._v(" "),t("li",[t("code",[r._v("L")]),r._v(": 表示 “Last” 最后，例如在日期字段表示一个月的"),t("strong",[r._v("最后")]),r._v("一天。只能出现在 【日期】和 【星期】域。")]),r._v(" "),t("li",[t("code",[r._v("W")]),r._v(": 表示"),t("strong",[r._v("有效工作日")]),r._v("(周一到周五)，只能出现在【日期】域。")]),r._v(" "),t("li",[t("code",[r._v("LW")]),r._v(": 这两个字符可以连用，表示在某个月最后一个工作日，即最后一个星期五。")]),r._v(" "),t("li",[t("code",[r._v("#")]),r._v(": 用于确定"),t("strong",[r._v("每个月第几个星期几")]),r._v("，只能出现在【星期】域。例如在 "),t("code",[r._v("4#2")]),r._v("，表示某月的第二个星期三。")])]),r._v(" "),t("p",[t("em",[r._v("以下是一些具体的例子：")])]),r._v(" "),t("ul",[t("li",[t("code",[r._v("0 * * * * ?")]),r._v(": 每分钟执行一次。")]),r._v(" "),t("li",[t("code",[r._v("0 0/30 * * * ?")]),r._v(": 每 30 分钟执行。")]),r._v(" "),t("li",[t("code",[r._v("0 0 * * * ?")]),r._v("：整点执行。")]),r._v(" "),t("li",[t("code",[r._v("0 0-59/2 * * * ?")]),r._v(": 每小时的第 2 分钟开始，每 2 分钟执行一次。")]),r._v(" "),t("li",[t("code",[r._v("0 8,14 * * * ?")]),r._v(": 每天的上午 8 点和下午 2 点执行。")]),r._v(" "),t("li",[t("code",[r._v("0 0/5 14 * * ?")]),r._v(": 在下午 2 点到 3 点之间，每 5 分钟执行一次。")]),r._v(" "),t("li",[t("code",[r._v("0 0 9-17 * * ?")]),r._v(": 从上午 9 点到下午 5 点，每小时的整点执行。")]),r._v(" "),t("li",[t("code",[r._v("0 15 10 L \\* ?")]),r._v("：每月最后一日的上午 10:15 执行。")]),r._v(" "),t("li",[t("code",[r._v("0 15 10 ? * 6#3")]),r._v(": 每月的第三个星期五上午 10:15 执行。")])]),r._v(" "),t("h3",{attrs:{id:"小结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[r._v("#")]),r._v(" 小结")]),r._v(" "),t("table",[t("thead",[t("tr",[t("th",[r._v("字段")]),r._v(" "),t("th",[r._v("允许值")]),r._v(" "),t("th",[r._v("允许的特殊字符")])])]),r._v(" "),t("tbody",[t("tr",[t("td",[r._v("秒（"),t("em",[r._v("Seconds")]),r._v("）")]),r._v(" "),t("td",[r._v("0~59 的整数")]),r._v(" "),t("td",[r._v(", - * /   四个字符")])]),r._v(" "),t("tr",[t("td",[r._v("分（"),t("em",[r._v("Minutes")]),r._v("）")]),r._v(" "),t("td",[r._v("0~59 的整数")]),r._v(" "),t("td",[r._v(", - * /   四个字符")])]),r._v(" "),t("tr",[t("td",[r._v("小时（"),t("em",[r._v("Hours")]),r._v("）")]),r._v(" "),t("td",[r._v("0~23 的整数")]),r._v(" "),t("td",[r._v(", - * /   四个字符")])]),r._v(" "),t("tr",[t("td",[r._v("日期（"),t("em",[r._v("DayOfMonth")]),r._v("）")]),r._v(" "),t("td",[r._v("1~31 的整数（但是你需要考虑你月的天数）")]),r._v(" "),t("td",[r._v(",- * ? / L W C   八个字符")])]),r._v(" "),t("tr",[t("td",[r._v("月份（"),t("em",[r._v("Month")]),r._v("）")]),r._v(" "),t("td",[r._v("1~12 的整数或者 JAN-DEC")]),r._v(" "),t("td",[r._v(", - * /   四个字符")])]),r._v(" "),t("tr",[t("td",[r._v("星期（"),t("em",[r._v("DayOfWeek")]),r._v("）")]),r._v(" "),t("td",[r._v("1~7 的整数或者 SUN-SAT （1=SUN）")]),r._v(" "),t("td",[r._v(", - * ? / L C #   八个字符")])]),r._v(" "),t("tr",[t("td",[r._v("年(可选，留空)（"),t("em",[r._v("Year")]),r._v("）")]),r._v(" "),t("td",[r._v("1970~2099")]),r._v(" "),t("td",[r._v(", - * /   四个字符")])])])]),r._v(" "),t("h2",{attrs:{id:"何为单机定时任务和分布式定时任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#何为单机定时任务和分布式定时任务"}},[r._v("#")]),r._v(" 何为单机定时任务和分布式定时任务")]),r._v(" "),t("p",[r._v("单机定时任务和分布式定时任务是两种不同的任务调度方式，它们在计算机系统中用于自动执行预定的任务。下面是它们的基本定义和区别：")]),r._v(" "),t("h3",{attrs:{id:"单机定时任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#单机定时任务"}},[r._v("#")]),r._v(" 单机定时任务")]),r._v(" "),t("ul",[t("li",[t("strong",[r._v("定义")]),r._v("：单机定时任务是指在单个计算机或服务器上运行的定时任务。这种任务通常由操作系统的调度器或特定的任务调度软件来管理。")]),r._v(" "),t("li",[r._v("特点：\n"),t("ul",[t("li",[t("strong",[r._v("单一资源")]),r._v("：单机定时任务只能在一个节点上运行，因此它只能利用该节点的资源。如果任务量超出了这个节点的处理能力，就可能导致性能瓶颈或任务延迟。")]),r._v(" "),t("li",[t("strong",[r._v("串行处理")]),r._v("：任务通常是串行执行的，这意味着它们一个接一个地运行，而不是同时进行。")]),r._v(" "),t("li",[t("strong",[r._v("简单性")]),r._v("：管理和配置相对简单，因为所有任务都在同一个系统上运行。")]),r._v(" "),t("li",[t("strong",[r._v("局限性")]),r._v("：如果任务量很大或需要高可用性，单机可能无法满足需求。")]),r._v(" "),t("li",[t("strong",[r._v("容错性较低")]),r._v("：如果单机发生故障，所有任务都可能受到影响，因为没有其他节点可以接管任务。")])])])]),r._v(" "),t("h3",{attrs:{id:"分布式定时任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分布式定时任务"}},[r._v("#")]),r._v(" 分布式定时任务")]),r._v(" "),t("ul",[t("li",[t("strong",[r._v("定义")]),r._v("：分布式定时任务是指在多个计算机或服务器上协调运行的定时任务。这种任务通常由分布式任务调度系统来管理，如 Apache Hadoop 的 Oozie、Apache Storm、Quartz 等。")]),r._v(" "),t("li",[r._v("特点：\n"),t("ul",[t("li",[t("strong",[r._v("扩展性")]),r._v("：可以跨多个节点分布任务，提高系统的处理能力和容错性。")]),r._v(" "),t("li",[t("strong",[r._v("高可用性")]),r._v("：通过在不同的节点上运行任务，可以减少单点故障的风险。")]),r._v(" "),t("li",[t("strong",[r._v("复杂性")]),r._v("：管理和配置比单机定时任务更复杂，需要考虑任务的分配、节点间的通信和数据同步等问题。")]),r._v(" "),t("li",[t("strong",[r._v("负载均衡")]),r._v("：可以根据节点的负载情况动态分配任务，优化资源使用。")]),r._v(" "),t("li",[t("strong",[r._v("容错性")]),r._v("：如果某个节点发生故障，任务可以被重新分配到其他节点上执行，从而提高系统的稳定性和可靠性。")])])])]),r._v(" "),t("h3",{attrs:{id:"区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#区别"}},[r._v("#")]),r._v(" 区别")]),r._v(" "),t("ul",[t("li",[t("strong",[r._v("多节点资源")]),r._v("：分布式定时任务可以在多个节点（服务器或计算机）上运行，这意味着它可以利用这些节点上的所有资源，包括CPU、内存、存储和网络带宽等。")]),r._v(" "),t("li",[t("strong",[r._v("并行处理")]),r._v("：任务可以在不同的节点上并行执行，从而提高处理速度和效率。")]),r._v(" "),t("li",[t("strong",[r._v("容错能力")]),r._v("：分布式系统通常具有更好的容错能力，因为任务可以在其他节点上重新调度。")]),r._v(" "),t("li",[t("strong",[r._v("可扩展性")]),r._v("：分布式系统更容易扩展，可以通过增加节点来处理更多的任务。")]),r._v(" "),t("li",[t("strong",[r._v("管理难度")]),r._v("：分布式定时任务的管理和配置通常比单机定时任务更复杂。")])]),r._v(" "),t("h2",{attrs:{id:"多线程执行定时任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多线程执行定时任务"}},[r._v("#")]),r._v(" 多线程执行定时任务")]),r._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://blog.csdn.net/pan_junbiao/article/details/109399280",target:"_blank",rel:"noopener noreferrer"}},[r._v("SpringBoot使用@Scheduled注解实现定时任务_springboot scheduled注解-CSDN博客"),t("OutboundLink")],1)]),r._v(" "),t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/lightdb/p/9727495.html",target:"_blank",rel:"noopener noreferrer"}},[r._v("spring boot @Scheduled未生效原因以及相关坑、及相对其他定时任务架构的优势 - zhjh256 - 博客园 (cnblogs.com)"),t("OutboundLink")],1)]),r._v(" "),t("li",[t("a",{attrs:{href:"https://www.cnblogs.com/goloving/p/15065200.html",target:"_blank",rel:"noopener noreferrer"}},[r._v("浅析SpringBoot中使用@scheduled定时执行任务需要注意的单线程的坑 - 古兰精 - 博客园 (cnblogs.com)"),t("OutboundLink")],1)]),r._v(" "),t("li",[t("a",{attrs:{href:"https://blog.csdn.net/zmemorys/article/details/105201647",target:"_blank",rel:"noopener noreferrer"}},[r._v("@Scheduled 的一些坑_scheduledcron失效-CSDN博客"),t("OutboundLink")],1)])]),r._v(" "),t("h2",{attrs:{id:"在线表达式生成器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在线表达式生成器"}},[r._v("#")]),r._v(" 在线表达式生成器")]),r._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://cron.ciding.cc/",target:"_blank",rel:"noopener noreferrer"}},[r._v("Cron - 在线Cron表达式生成器 (ciding.cc)"),t("OutboundLink")],1)]),r._v(" "),t("li",[t("a",{attrs:{href:"https://www.matools.com/cron/",target:"_blank",rel:"noopener noreferrer"}},[r._v("在线Cron表达式生成器 - 码工具 (matools.com)"),t("OutboundLink")],1)]),r._v(" "),t("li",[t("a",{attrs:{href:"https://cron.qqe2.com/",target:"_blank",rel:"noopener noreferrer"}},[r._v("在线Cron表达式生成器 (qqe2.com)"),t("OutboundLink")],1)]),r._v(" "),t("li",[t("a",{attrs:{href:"https://www.bejson.com/othertools/cron/",target:"_blank",rel:"noopener noreferrer"}},[r._v("quartz/Cron/Crontab表达式在线生成工具-BeJSON.com"),t("OutboundLink")],1)])]),r._v(" "),t("h2",{attrs:{id:"学习参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#学习参考"}},[r._v("#")]),r._v(" 学习参考")]),r._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.bejson.com/othertools/cronvalidate/",target:"_blank",rel:"noopener noreferrer"}},[r._v("cron表达式详解"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=e.exports}}]);