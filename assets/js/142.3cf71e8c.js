(window.webpackJsonp=window.webpackJsonp||[]).push([[142],{472:function(s,t,a){"use strict";a.r(t);var r=a(1),e=Object(r.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"聊聊多租户是什么"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#聊聊多租户是什么"}},[s._v("#")]),s._v(" 聊聊多租户是什么")]),s._v(" "),t("h2",{attrs:{id:"什么是多租户-multi-tenancy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是多租户-multi-tenancy"}},[s._v("#")]),s._v(" 什么是多租户（Multi-Tenancy）？")]),s._v(" "),t("p",[s._v("多租户，简单来说就是：")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("一个系统、一个数据库、一个部署实例，服务多个“客户”——每个客户就是一个“租户”。")])])]),s._v(" "),t("p",[s._v("举个例子：")]),s._v(" "),t("ul",[t("li",[s._v("你开发了一个在线 CRM 系统，A 公司、B 公司都使用你这套系统，但你并不是为每个公司单独部署一套系统，而是通过一个共享的系统服务他们，这就叫"),t("strong",[s._v("多租户架构")]),s._v("。")])]),s._v(" "),t("h3",{attrs:{id:"多租户-vs-单租户-区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多租户-vs-单租户-区别"}},[s._v("#")]),s._v(" 多租户 vs 单租户（区别）")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("比较项")]),s._v(" "),t("th",[s._v("多租户（Multi-Tenant）")]),s._v(" "),t("th",[s._v("单租户（Single-Tenant）")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("系统部署")]),s._v(" "),t("td",[s._v("一个系统服务多个客户")]),s._v(" "),t("td",[s._v("每个客户单独部署一套系统")])]),s._v(" "),t("tr",[t("td",[s._v("数据库")]),s._v(" "),t("td",[s._v("共享（带租户隔离）或分库")]),s._v(" "),t("td",[s._v("每个客户独立数据库")])]),s._v(" "),t("tr",[t("td",[s._v("成本")]),s._v(" "),t("td",[s._v("成本低、运维集中")]),s._v(" "),t("td",[s._v("成本高、灵活性强")])]),s._v(" "),t("tr",[t("td",[s._v("隔离性")]),s._v(" "),t("td",[s._v("数据隔离，资源共享（风险需控制）")]),s._v(" "),t("td",[s._v("完全隔离，安全性好")])]),s._v(" "),t("tr",[t("td",[s._v("应用场景")]),s._v(" "),t("td",[s._v("典型的 SaaS 系统，如企业协作平台、CRM 等")]),s._v(" "),t("td",[s._v("银行、政府等对数据独立性要求高的机构")])])])]),s._v(" "),t("h2",{attrs:{id:"多租户架构的实现方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多租户架构的实现方式"}},[s._v("#")]),s._v(" 多租户架构的实现方式")]),s._v(" "),t("p",[s._v("多租户系统的核心问题是：“"),t("strong",[s._v("如何隔离不同租户的数据和权限？")]),s._v("”")]),s._v(" "),t("p",[s._v("根据"),t("strong",[s._v("数据库隔离粒度")]),s._v("，多租户有以下 3 种典型实现：")]),s._v(" "),t("h3",{attrs:{id:"_1-共享数据库-共享表-最常见"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-共享数据库-共享表-最常见"}},[s._v("#")]),s._v(" 1. 共享数据库，共享表（最常见）")]),s._v(" "),t("ul",[t("li",[s._v("所有租户共用一套数据库、一张表")]),s._v(" "),t("li",[s._v("用一个字段（如 "),t("code",[s._v("tenant_id")]),s._v("）区分数据归属")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" tenant_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'A公司'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("✅ 优点：简单、高性能、节省资源\n⚠️ 缺点：隔离性依赖代码控制，一旦出错可能数据泄露")]),s._v(" "),t("blockquote",[t("p",[s._v("Java 实现方式：MyBatis + 插件自动加租户过滤条件、ThreadLocal 存当前租户上下文")])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"_2-共享数据库-独立-schema-中等方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-共享数据库-独立-schema-中等方案"}},[s._v("#")]),s._v(" 2. 共享数据库，独立 Schema（中等方案）")]),s._v(" "),t("ul",[t("li",[s._v("每个租户一个数据库 Schema（逻辑隔离）")]),s._v(" "),t("li",[s._v("数据结构一致，表前缀或命名空间不同")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" tenant_a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" tenant_b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("✅ 优点：隔离性增强，性能仍可控\n⚠️ 缺点：维护成本变高，迁移麻烦")]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"_3-独立数据库-最高隔离"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-独立数据库-最高隔离"}},[s._v("#")]),s._v(" 3. 独立数据库（最高隔离）")]),s._v(" "),t("ul",[t("li",[s._v("每个租户一个独立数据库实例")])]),s._v(" "),t("p",[s._v("✅ 优点：隔离性最好，适合重要客户\n⚠️ 缺点：成本高、复杂度高，不利于扩展")]),s._v(" "),t("h2",{attrs:{id:"多租户系统中核心设计点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多租户系统中核心设计点"}},[s._v("#")]),s._v(" 多租户系统中核心设计点")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("租户识别")]),s._v("（Tenant Identification）\n"),t("ul",[t("li",[s._v("每个请求中要知道是哪一个租户来的（通常 JWT Token 中携带 "),t("code",[s._v("tenant_id")]),s._v("）")]),s._v(" "),t("li",[s._v("登录时就关联租户上下文")])])]),s._v(" "),t("li",[t("strong",[s._v("数据隔离")]),s._v("（Data Isolation）\n"),t("ul",[t("li",[s._v("查询、更新、删除必须带上租户条件")]),s._v(" "),t("li",[s._v("通常在 ORM 层加拦截器（MyBatis Interceptor 或 JPA Filter）自动加条件，防止忘记写")])])]),s._v(" "),t("li",[t("strong",[s._v("权限隔离")]),s._v("（RBAC with Tenant）\n"),t("ul",[t("li",[s._v("每个租户有自己的角色、权限体系")]),s._v(" "),t("li",[s._v("“租户 A 的管理员”不能操作“租户 B 的用户”")])])]),s._v(" "),t("li",[t("strong",[s._v("租户配置个性化")]),s._v("（Customizable Settings）\n"),t("ul",[t("li",[s._v("每个租户可能想配置自己专属的菜单、Logo、权限、字段等")]),s._v(" "),t("li",[s._v("系统需要支持动态配置（表驱动 + 多租户字段控制）")])])]),s._v(" "),t("li",[t("strong",[s._v("平台管理员（超级租户）")]),s._v(" "),t("ul",[t("li",[s._v("SaaS 服务商自己需要有超级管理员，可查看所有租户信息、开通停用租户、监控系统运行等")])])])]),s._v(" "),t("h2",{attrs:{id:"后端开发中如何支持多租户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#后端开发中如何支持多租户"}},[s._v("#")]),s._v(" 后端开发中如何支持多租户？")]),s._v(" "),t("p",[s._v("以 Java + Spring Boot + MyBatis 为例：")]),s._v(" "),t("h3",{attrs:{id:"_1-租户上下文"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-租户上下文"}},[s._v("#")]),s._v(" 1. 租户上下文")]),s._v(" "),t("p",[s._v("通过 "),t("code",[s._v("ThreadLocal")]),s._v(" 保存当前请求上下文中的租户 ID：")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TenantContext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTenantId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tenantA"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_2-mybatis-拦截器添加租户条件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-mybatis-拦截器添加租户条件"}},[s._v("#")]),s._v(" 2. MyBatis 拦截器添加租户条件")]),s._v(" "),t("p",[s._v("实现 MyBatis 的 "),t("code",[s._v("Interceptor")]),s._v("，在所有 "),t("code",[s._v("SELECT")]),s._v("、"),t("code",[s._v("UPDATE")]),s._v("、"),t("code",[s._v("DELETE")]),s._v(" 中自动追加 "),t("code",[s._v("tenant_id")]),s._v(" 条件。")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" tenant_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ?\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_3-token-携带租户信息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-token-携带租户信息"}},[s._v("#")]),s._v(" 3. Token 携带租户信息")]),s._v(" "),t("p",[s._v("登录成功后，JWT Token 中包含 "),t("code",[s._v("tenant_id")]),s._v("，每次请求时从 Header 中解析并设置到上下文。")]),s._v(" "),t("h3",{attrs:{id:"_4-表设计规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-表设计规范"}},[s._v("#")]),s._v(" 4. 表设计规范")]),s._v(" "),t("ul",[t("li",[s._v("每张租户相关的业务表都要加 "),t("code",[s._v("tenant_id")]),s._v(" 字段")]),s._v(" "),t("li",[s._v("添加复合索引："),t("code",[s._v("tenant_id + 主键")]),s._v("，提升查询性能")]),s._v(" "),t("li",[s._v("公共表（如系统字典）可以不加租户字段")])]),s._v(" "),t("h2",{attrs:{id:"多租户架构图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多租户架构图"}},[s._v("#")]),s._v(" 多租户架构图")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------+")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      用户浏览器"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("APP      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------+")]),s._v("\n                                     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                                     v\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------+")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      API 网关（Gateway） "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" JWT 鉴权              "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 租户识别               "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------+")]),s._v("\n                                     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                                     v\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------+")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  应用服务层（Spring Boot）"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                          "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------+  |")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 租户上下文管理器    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------- 从 JWT 中获取 tenantId")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------+  |")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                          "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------+  |")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 权限认证（RBAC"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ABAC）"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------- 基于角色+租户权限控制")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------+  |")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                          "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------+  |")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" 业务服务（Controller）"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------+  |")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------+")]),s._v("\n                                     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                                     v\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------+")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  ORM 层（MyBatis "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" JPA） "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SQL")]),s._v(" 自动加租户条件     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 拦截器添加 tenant_id    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------+")]),s._v("\n                                     "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                                     v\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------+")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    数据库（共享数据库）   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" 表    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    每张表都带 tenant_id    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n                         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--------------------------+")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br")])]),t("h2",{attrs:{id:"总结-什么是多租户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结-什么是多租户"}},[s._v("#")]),s._v(" 总结：什么是多租户？")]),s._v(" "),t("p",[s._v("多租户是让 “一套系统服务多个客户” 的核心能力。")]),s._v(" "),t("p",[s._v("开发时，你要掌握：")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("知识点")]),s._v(" "),t("th",[s._v("技术设计思路")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("租户识别")]),s._v(" "),t("td",[s._v("JWT + Header + ThreadLocal")])]),s._v(" "),t("tr",[t("td",[s._v("数据隔离")]),s._v(" "),t("td",[s._v("数据库设计 + ORM 拦截器")])]),s._v(" "),t("tr",[t("td",[s._v("权限隔离")]),s._v(" "),t("td",[s._v("每租户独立 RBAC 模型")])]),s._v(" "),t("tr",[t("td",[s._v("配置隔离")]),s._v(" "),t("td",[s._v("每租户动态参数配置表")])]),s._v(" "),t("tr",[t("td",[s._v("跨租户管理")]),s._v(" "),t("td",[s._v("超级租户账号或平台管理后台")])])])])])}),[],!1,null,null,null);t.default=e.exports}}]);