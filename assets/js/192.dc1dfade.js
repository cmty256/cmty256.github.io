(window.webpackJsonp=window.webpackJsonp||[]).push([[192],{520:function(s,a,t){"use strict";t.r(a);var n=t(1),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"ffmpeg-入门"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ffmpeg-入门"}},[s._v("#")]),s._v(" ffmpeg 入门")]),s._v(" "),a("h2",{attrs:{id:"_1-ffmpeg-基础概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-ffmpeg-基础概念"}},[s._v("#")]),s._v(" 1. FFmpeg 基础概念")]),s._v(" "),a("h3",{attrs:{id:"_1-1-什么是-ffmpeg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-什么是-ffmpeg"}},[s._v("#")]),s._v(" 1.1 什么是 FFmpeg？")]),s._v(" "),a("p",[s._v("FFmpeg 是一个"),a("strong",[s._v("开源的多媒体处理工具包")]),s._v("，包含了用于解码、编码、转码、复用（mux）、解复用（demux）、流媒体传输、过滤和播放几乎所有音视频格式的程序和库。")]),s._v(" "),a("p",[s._v("其主要组件包括：")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("ffmpeg 命令行工具")]),s._v("：用于进行音视频文件转换、剪辑、合并、滤镜处理等任务。")]),s._v(" "),a("li",[a("strong",[s._v("ffprobe")]),s._v("：用于分析多媒体文件，获取格式、码率、帧率、时长等信息。")]),s._v(" "),a("li",[a("strong",[s._v("ffplay")]),s._v("：一个简单的基于 SDL 的播放器，用于快速预览文件内容。")])]),s._v(" "),a("h3",{attrs:{id:"_1-2-gop-与帧类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-gop-与帧类型"}},[s._v("#")]),s._v(" 1.2 GOP 与帧类型")]),s._v(" "),a("p",[s._v("在视频编码中，FFmpeg 常用 GOP（Group of Pictures，图像组）结构来描述帧之间的依赖关系：")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("I 帧")]),s._v("（Intra-coded frame）：完全独立的帧，可作为关键帧进行随机访问。")]),s._v(" "),a("li",[a("strong",[s._v("P 帧")]),s._v("（Predictive frame）：利用之前的 I 或 P 帧预测编码，数据量较小。")]),s._v(" "),a("li",[a("strong",[s._v("B 帧")]),s._v("（Bidirectionally predictive frame）：利用前后帧进行双向预测，压缩率更高但解码复杂度更大。")])]),s._v(" "),a("p",[s._v("理解 GOP 结构有助于调优编码参数以及在剪辑、流媒体等场景下合理设置关键帧间隔，从而平衡文件大小和视频质量。")]),s._v(" "),a("h3",{attrs:{id:"_1-3-命令格式概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-命令格式概述"}},[s._v("#")]),s._v(" 1.3 命令格式概述")]),s._v(" "),a("p",[s._v("FFmpeg 命令行工具的基本语法大致如下：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ffmpeg "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("全局参数"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("输入选项"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" 输入文件"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("输出选项"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 输出文件"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("全局参数")]),s._v("：对整个命令有效，如 "),a("code",[s._v("-y")]),s._v("（覆盖输出文件）、"),a("code",[s._v("-loglevel")]),s._v("（设置日志级别）等。")]),s._v(" "),a("li",[a("strong",[s._v("输入选项")]),s._v("：放在 "),a("code",[s._v("-i")]),s._v(" 前面的参数，只对紧跟其后的输入文件生效，例如 "),a("code",[s._v("-ss")]),s._v(" 用于设置起始时间（快速定位输入流）。")]),s._v(" "),a("li",[a("strong",[s._v("输出选项")]),s._v("：出现在输入文件之后，专门控制输出文件的编码、格式等，如 "),a("code",[s._v("-c:v")]),s._v("（指定视频编码器）、"),a("code",[s._v("-b:a")]),s._v("（音频比特率）等。")])]),s._v(" "),a("p",[s._v("这类结构让 FFmpeg 的命令既灵活又具有明确的定位意义，输入选项和输出选项分别对应数据的不同处理阶段。")]),s._v(" "),a("h2",{attrs:{id:"_2-常用-ffmpeg-命令示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-常用-ffmpeg-命令示例"}},[s._v("#")]),s._v(" 2. 常用 FFmpeg 命令示例")]),s._v(" "),a("p",[s._v("下面介绍一些典型的 FFmpeg 命令和用法，方便你在实际项目中快速上手：")]),s._v(" "),a("h3",{attrs:{id:"_2-1-格式转换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-格式转换"}},[s._v("#")]),s._v(" 2.1 格式转换")]),s._v(" "),a("p",[s._v("将 MP4 文件转换为 WebM：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ffmpeg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" input.mp4 output.webm\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或指定编码器参数进行更精细的控制")]),s._v("\nffmpeg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" input.mp4 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c:v")]),s._v(" libvpx-vp9 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c:a")]),s._v(" libopus output.webm\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("将 MP4 文件转换为 MKV，并指定编码器：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ffmpeg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" input.mp4 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c:v")]),s._v(" libx264 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-preset")]),s._v(" fast "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-crf")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c:a")]),s._v(" aac "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-b:a")]),s._v(" 128k output.mkv\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("这里 "),a("code",[s._v("-preset fast")]),s._v(" 表示编码速度设为“快”，"),a("code",[s._v("-crf 23")]),s._v(" 控制输出视频质量。")])]),s._v(" "),a("h3",{attrs:{id:"_2-2-视频剪辑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-视频剪辑"}},[s._v("#")]),s._v(" 2.2 视频剪辑")]),s._v(" "),a("p",[s._v("不重新编码快速剪辑视频（通过复制流）：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("-ss")]),s._v(" 位于输入前实现快速定位，而 "),a("code",[s._v("-t")]),s._v(" 表示截取的时长，"),a("code",[s._v("-c copy")]),s._v(" 表示不重新编码，直接复制数据流。")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ffmpeg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ss")]),s._v(" 00:00:10 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" 00:00:20 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" input.mp4 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" copy clip.mp4\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("若需要重新编码，可省略 "),a("code",[s._v("-c copy")]),s._v("：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ffmpeg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ss")]),s._v(" 00:00:10 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-t")]),s._v(" 00:00:20 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" input.mp4 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c:v")]),s._v(" libx264 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c:a")]),s._v(" aac clip.mp4\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-3-提取或去除音频"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-提取或去除音频"}},[s._v("#")]),s._v(" 2.3 提取或去除音频")]),s._v(" "),a("p",[s._v("提取视频中的音频：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ffmpeg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" input.mp4 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-vn")]),s._v(" output.mp3\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("去除视频中的音频（静音视频）：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ffmpeg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" input.mp4 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-an")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c:v")]),s._v(" copy muted.mp4\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-4-拼接视频"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-拼接视频"}},[s._v("#")]),s._v(" 2.4 拼接视频")]),s._v(" "),a("p",[s._v("首先创建一个文件列表 "),a("code",[s._v("filelist.txt")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("file 'part1.mp4'\nfile 'part2.mp4'\nfile 'part3.mp4'\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("然后执行：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ffmpeg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" concat "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-safe")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" filelist.txt "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" copy output.mp4\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-5-转换视频到-gif"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-转换视频到-gif"}},[s._v("#")]),s._v(" 2.5 转换视频到 GIF")]),s._v(" "),a("p",[s._v("生成 GIF 动画：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ffmpeg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" input.mp4 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-vf")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fps=10,scale=320:-1:flags=lanczos"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c:v")]),s._v(" gif output.gif\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-6-添加滤镜"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-添加滤镜"}},[s._v("#")]),s._v(" 2.6 添加滤镜")]),s._v(" "),a("p",[s._v("缩放视频并在视频上叠加文字：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("-vf")]),s._v("：视频滤镜，用于执行缩放、裁剪、叠加文字等操作。")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ffmpeg "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-y")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" input.mp4 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-vf")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"scale=640:360,drawtext=text='FFmpeg':fontcolor=white:fontsize=24:x=10:y=10\"")]),s._v(" output.mp4\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-7-获取视频时长"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-获取视频时长"}},[s._v("#")]),s._v(" 2.7 获取视频时长")]),s._v(" "),a("p",[s._v("FFmpeg 还提供了一个专门的工具 "),a("code",[s._v("ffprobe")]),s._v("，它可以更方便地获取视频的元数据信息，包括时长。")]),s._v(" "),a("p",[s._v("使用以下命令将直接输出视频的时长（以秒为单位），例如：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ffprobe "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" input.mp4 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-show_entries")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("format")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("duration "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" quiet "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-of")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("csv")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"p=0"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_3-在-java-中调用-ffmpeg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-在-java-中调用-ffmpeg"}},[s._v("#")]),s._v(" 3. 在 Java 中调用 FFmpeg")]),s._v(" "),a("p",[s._v("在 Java 应用中，通常有两种方式调用 FFmpeg：")]),s._v(" "),a("h3",{attrs:{id:"_3-1-通过-runtime-processbuilder-调用命令行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-通过-runtime-processbuilder-调用命令行"}},[s._v("#")]),s._v(" 3.1 通过 Runtime/ProcessBuilder 调用命令行")]),s._v(" "),a("p",[s._v("利用 Java 自带的 "),a("code",[s._v("Runtime.getRuntime().exec()")]),s._v(" 或 "),a("code",[s._v("ProcessBuilder")]),s._v("，直接调用 FFmpeg 命令。")]),s._v(" "),a("p",[s._v("例如，下面的示例代码展示了如何调用 FFmpeg 剪辑视频片段：")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FFmpegProcess")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" inputFile "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"input.mp4"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" outputFile "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clip.mp4"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 从 10 秒开始剪辑 20 秒的视频")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" command "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ffmpeg -ss 00:00:10 -i %s -t 00:00:20 -c copy %s"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" inputFile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" outputFile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProcessBuilder")]),s._v(" builder "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProcessBuilder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        builder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("command")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bash"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" command"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// Linux/macOS；Windows 下可直接使用 "cmd", "/c", command')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Process")]),s._v(" process "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" builder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("waitFor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"剪辑完成"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("这种方法简单直接，但对错误处理和跨平台兼容性需要开发者自行处理。")]),s._v(" "),a("h3",{attrs:{id:"_3-2-使用-java-封装库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-使用-java-封装库"}},[s._v("#")]),s._v(" 3.2 使用 Java 封装库")]),s._v(" "),a("p",[s._v("有不少 Java 封装库对 FFmpeg 进行了包装，使得你可以以更面向对象的方式使用 FFmpeg。")]),s._v(" "),a("p",[s._v("常见的有：")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("Jaffree")]),s._v("：一个基于命令行调用的轻量级 Java 封装库，支持视频转码、剪辑、流处理等。Jaffree 提供了 fluent API，简化了命令构造。")]),s._v(" "),a("li",[a("strong",[s._v("JavaCV")]),s._v("：JavaCV 是 OpenCV 与 FFmpeg 的 Java 封装库，除了视频处理，还提供了计算机视觉相关的功能。它的许可证 Apache 2.0 适合闭源应用。")])]),s._v(" "),a("p",[s._v("例如，使用 Jaffree 调用 FFmpeg 进行视频剪辑的代码示例：")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("kokorin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jaffree"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ffmpeg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FFmpeg")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("kokorin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("jaffree"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ffmpeg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FFmpegResult")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("JaffreeExample")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FFmpegResult")]),s._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FFmpeg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("atPath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("addInput")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"input.mp4"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setStartTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"00:00:10"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setDuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"00:00:20"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("addOutput")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clip.mp4"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("execute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"剪辑完成："')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("使用这些库可以避免手动解析命令行参数，简化开发过程，同时也便于集成到 Spring Boot 等现代 Java 框架中。")]),s._v(" "),a("h3",{attrs:{id:"_3-3-maven-依赖版本对应"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-maven-依赖版本对应"}},[s._v("#")]),s._v(" 3.3 Maven 依赖版本对应")]),s._v(" "),a("p",[s._v("javacv 和 ffmpeg 的版本对应关系：")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://bytedeco.org/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Bytedeco - Download"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("版本不对应可能会抛出异常：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Could not initialize class org.bytedeco.ffmpeg.global.avutil\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_4-实践案例-构建视频剪辑服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-实践案例-构建视频剪辑服务"}},[s._v("#")]),s._v(" 4. 实践案例：构建视频剪辑服务")]),s._v(" "),a("p",[s._v("以一个简单的案例说明如何在 Spring Boot 中整合 FFmpeg 进行视频剪辑。思路如下：")]),s._v(" "),a("ol",[a("li",[s._v("接收前端上传的原始视频文件。")]),s._v(" "),a("li",[s._v("通过 FFmpeg 剪辑出指定时段的片段。")]),s._v(" "),a("li",[s._v("将剪辑好的片段返回给前端或保存到存储服务器。")])]),s._v(" "),a("p",[s._v("核心代码示例：")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RestController")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/video"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("VideoController")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@PostMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/clip"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("createClip")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"start"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" startTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                                               "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"duration"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" duration"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                                               "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestParam")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"inputFile"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MultipartFile")]),s._v(" inputFile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 保存上传的文件到临时目录")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("File")]),s._v(" tempInput "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("File")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("createTempFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"input"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('".mp4"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        inputFile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("transferTo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tempInput"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("File")]),s._v(" tempOutput "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("File")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("createTempFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"clip"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('".mp4"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 构造 FFmpeg 命令")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" command "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ffmpeg -ss %s -i %s -t %s -c copy %s"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                startTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                tempInput"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getAbsolutePath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                duration"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                tempOutput"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getAbsolutePath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProcessBuilder")]),s._v(" builder "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProcessBuilder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bash"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" command"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Linux/macOS")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Process")]),s._v(" process "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" builder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("waitFor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 此处可将 tempOutput 返回给客户端或进一步处理")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ResponseEntity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ok")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"剪辑完成，输出文件："')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" tempOutput"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getAbsolutePath")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("p",[s._v("你可以将以上代码扩展为完整的 REST API 服务，处理异常、日志记录及并发任务等。")]),s._v(" "),a("h2",{attrs:{id:"_5-小结与扩展学习"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-小结与扩展学习"}},[s._v("#")]),s._v(" 5. 小结与扩展学习")]),s._v(" "),a("p",[s._v("本文介绍了 FFmpeg 的基本原理和常用命令，同时讨论了如何在 Java 中通过命令行调用和封装库（如 Jaffree、JavaCV）来集成 FFmpeg。")]),s._v(" "),a("p",[s._v("以下几点是你在学习过程中可以进一步探讨的内容：")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("FFmpeg 高级参数")]),s._v("：例如码率控制、CRF 参数、预设（preset）和复杂滤镜（如 overlay、drawtext 等）。")]),s._v(" "),a("li",[a("strong",[s._v("实时流处理")]),s._v("：如何利用 FFmpeg 实现 RTSP 流转换和实时转码。")]),s._v(" "),a("li",[a("strong",[s._v("错误处理与日志收集")]),s._v("：在调用 FFmpeg 时如何捕获错误输出，保证服务稳定性。")])]),s._v(" "),a("p",[s._v("通过理论学习与实践结合，相信你能快速掌握 FFmpeg 的使用，为你的 Java 项目添加强大的多媒体处理能力。")]),s._v(" "),a("h2",{attrs:{id:"_6-ffmpeg-安装与配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-ffmpeg-安装与配置"}},[s._v("#")]),s._v(" 6. FFmpeg 安装与配置")]),s._v(" "),a("ul",[a("li",[s._v("下载地址："),a("a",{attrs:{href:"https://www.ffmpeg.org/download.html#build-windows",target:"_blank",rel:"noopener noreferrer"}},[s._v("Download FFmpeg"),a("OutboundLink")],1)]),s._v(" "),a("li",[s._v("教程参考："),a("a",{attrs:{href:"https://blog.csdn.net/Natsuago/article/details/143231558",target:"_blank",rel:"noopener noreferrer"}},[s._v("FFmpeg 超级详细安装与配置教程（Windows 系统）_windows安装ffmpeg-CSDN博客"),a("OutboundLink")],1)])]),s._v(" "),a("h2",{attrs:{id:"学习参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#学习参考"}},[s._v("#")]),s._v(" 学习参考")]),s._v(" "),a("ul",[a("li",[s._v("官方文档（英文）："),a("a",{attrs:{href:"http://ffmpeg.org/ffmpeg.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://ffmpeg.org/ffmpeg.html"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);