(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{431:function(s,t,a){"use strict";a.r(t);var n=a(1),_=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"json-字段处理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#json-字段处理"}},[s._v("#")]),s._v(" JSON 字段处理")]),s._v(" "),t("p",[s._v("现代数据库中，许多支持存储和操作 JSON 数据格式的字段类型，使得处理结构化和半结构化数据变得方便。以下这些知识点涵盖 JSON 字段的存储、查询、更新和常用函数。")]),s._v(" "),t("h2",{attrs:{id:"json-的存储"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#json-的存储"}},[s._v("#")]),s._v(" JSON 的存储")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("存储方式")]),s._v("：\n"),t("ul",[t("li",[t("strong",[s._v("原生 JSON 类型")]),s._v("：如 MySQL 的 "),t("code",[s._v("JSON")]),s._v(" 或 PostgreSQL 的 "),t("code",[s._v("JSONB")]),s._v("，提供高效存储和索引。")]),s._v(" "),t("li",[t("strong",[s._v("字符串存储")]),s._v("：JSON 数据可以存储为 "),t("code",[s._v("TEXT")]),s._v(" 或 "),t("code",[s._v("VARCHAR")]),s._v(" 字段，但查询和性能有限。")])])]),s._v(" "),t("li",[t("strong",[s._v("JSONB（PostgreSQL 专有）")]),s._v("：\n"),t("ul",[t("li",[s._v("二进制格式存储，性能优于普通 JSON。")]),s._v(" "),t("li",[s._v("支持索引优化和快速查询。")]),s._v(" "),t("li",[s._v("无序存储（键值对顺序可能变化）。")])])])]),s._v(" "),t("h2",{attrs:{id:"json-字段的操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#json-字段的操作"}},[s._v("#")]),s._v(" JSON 字段的操作")]),s._v(" "),t("h3",{attrs:{id:"_1-插入-json-数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-插入-json-数据"}},[s._v("#")]),s._v(" 1. 插入 JSON 数据")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- MySQL")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" my_table "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("json_column"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{"name": "Alice", "age": 25}\'')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- PostgreSQL")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" my_table "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("json_column"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'{"name": "Alice", "age": 25}\'')]),s._v("::jsonb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("hr"),s._v(" "),t("h3",{attrs:{id:"_2-查询-json-数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-查询-json-数据"}},[s._v("#")]),s._v(" 2. 查询 JSON 数据")]),s._v(" "),t("blockquote",[t("p",[s._v("MySQL 常用 JSON 函数")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("函数/操作")]),s._v(" "),t("th",[s._v("描述")]),s._v(" "),t("th",[s._v("示例")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("JSON_EXTRACT")])]),s._v(" "),t("td",[s._v("提取 JSON 数据的特定路径")]),s._v(" "),t("td",[t("code",[s._v("SELECT JSON_EXTRACT(json_column, '$.name')")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("->")])]),s._v(" "),t("td",[s._v("提取 JSON 中的键值，返回 JSON 格式")]),s._v(" "),t("td",[t("code",[s._v("SELECT json_column->'$.name'")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("->>")])]),s._v(" "),t("td",[s._v("提取 JSON 中的键值，返回字符串")]),s._v(" "),t("td",[t("code",[s._v("SELECT json_column->>'$.name'")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("JSON_CONTAINS")])]),s._v(" "),t("td",[s._v("判断 JSON 是否包含特定的键值")]),s._v(" "),t("td",[t("code",[s._v("SELECT JSON_CONTAINS(json_column, '\"Alice\"', '$.name')")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("JSON_KEYS")])]),s._v(" "),t("td",[s._v("获取 JSON 对象的所有键")]),s._v(" "),t("td",[t("code",[s._v("SELECT JSON_KEYS(json_column)")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("JSON_ARRAY")])]),s._v(" "),t("td",[s._v("创建 JSON 数组")]),s._v(" "),t("td",[t("code",[s._v("SELECT JSON_ARRAY('Alice', 'Bob')")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("JSON_OBJECT")])]),s._v(" "),t("td",[s._v("创建 JSON 对象")]),s._v(" "),t("td",[t("code",[s._v("SELECT JSON_OBJECT('name', 'Alice')")])])])])]),s._v(" "),t("blockquote",[t("p",[s._v("PostgreSQL 常用 JSON 函数")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("函数/操作")]),s._v(" "),t("th",[s._v("描述")]),s._v(" "),t("th",[s._v("示例")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[t("code",[s._v("->")])]),s._v(" "),t("td",[s._v("提取 JSON 对象或数组中的子元素，返回 JSON 格式")]),s._v(" "),t("td",[t("code",[s._v("SELECT json_column->'name'")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("->>")])]),s._v(" "),t("td",[s._v("提取 JSON 对象或数组中的子元素，返回文本格式")]),s._v(" "),t("td",[t("code",[s._v("SELECT json_column->>'name'")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("#>")])]),s._v(" "),t("td",[s._v("根据路径提取嵌套 JSON 数据，返回 JSON 格式")]),s._v(" "),t("td",[t("code",[s._v("SELECT json_column#>'{address, city}'")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("#>>")])]),s._v(" "),t("td",[s._v("根据路径提取嵌套 JSON 数据，返回文本格式")]),s._v(" "),t("td",[t("code",[s._v("SELECT json_column#>>'{address, city}'")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("jsonb_array_elements")])]),s._v(" "),t("td",[s._v("将 JSON 数组的每个元素拆分为独立行")]),s._v(" "),t("td",[t("code",[s._v("SELECT jsonb_array_elements(json_column)")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("jsonb_set")])]),s._v(" "),t("td",[s._v("更新 JSON 数据中的某个键值")]),s._v(" "),t("td",[t("code",[s._v("SELECT jsonb_set(json_column, '{age}', '30')")])])]),s._v(" "),t("tr",[t("td",[t("code",[s._v("jsonb_each")])]),s._v(" "),t("td",[s._v("将 JSON 对象的每个键值对拆分为独立行")]),s._v(" "),t("td",[t("code",[s._v("SELECT * FROM jsonb_each(json_column)")])])])])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"_3-更新-json-数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-更新-json-数据"}},[s._v("#")]),s._v(" 3. 更新 JSON 数据")]),s._v(" "),t("blockquote",[t("p",[s._v("MySQL")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 更新 JSON 字段中的特定键值")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" my_table\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" json_column "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" JSON_SET"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("json_column"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$.name'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Bob'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("blockquote",[t("p",[s._v("PostgreSQL")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 使用 jsonb_set 更新字段")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" my_table\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" json_column "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" jsonb_set"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("json_column"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{name}'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\"Bob\"'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("hr"),s._v(" "),t("h3",{attrs:{id:"_4-删除-json-数据中的键值"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-删除-json-数据中的键值"}},[s._v("#")]),s._v(" 4. 删除 JSON 数据中的键值")]),s._v(" "),t("blockquote",[t("p",[s._v("MySQL")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 删除 JSON 中的键")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" my_table\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" json_column "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" JSON_REMOVE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("json_column"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$.age'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("blockquote",[t("p",[s._v("PostgreSQL")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 删除 JSONB 中的键")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" my_table\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" json_column "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" json_column "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'age'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("hr"),s._v(" "),t("h3",{attrs:{id:"_5-json-索引"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-json-索引"}},[s._v("#")]),s._v(" 5. JSON 索引")]),s._v(" "),t("blockquote",[t("p",[s._v("MySQL")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("虚拟列索引：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" my_table\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COLUMN")]),s._v(" name_virtual "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" GENERATED ALWAYS "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("json_column"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$.name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" STORED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ADD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INDEX")]),s._v(" idx_name_virtual "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name_virtual"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])])])]),s._v(" "),t("blockquote",[t("p",[s._v("PostgreSQL")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("GIN 索引（适用于 JSONB）：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INDEX")]),s._v(" idx_jsonb "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" my_table "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USING")]),s._v(" GIN "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("json_column"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"json-数据的应用场景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#json-数据的应用场景"}},[s._v("#")]),s._v(" JSON 数据的应用场景")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("存储半结构化数据")]),s._v("：\n"),t("ul",[t("li",[s._v("如日志信息、配置文件、第三方 API 返回结果等。")])])]),s._v(" "),t("li",[t("strong",[s._v("动态字段")]),s._v("：\n"),t("ul",[t("li",[s._v("适用于字段结构不固定的场景，比如用户自定义配置。")])])]),s._v(" "),t("li",[t("strong",[s._v("嵌套结构")]),s._v("：\n"),t("ul",[t("li",[s._v("如订单详情、用户信息等复杂嵌套数据的存储。")])])]),s._v(" "),t("li",[t("strong",[s._v("全文搜索和过滤")]),s._v("：\n"),t("ul",[t("li",[s._v("结合 JSON 索引进行复杂的过滤和全文搜索。")])])])]),s._v(" "),t("h2",{attrs:{id:"注意事项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[s._v("#")]),s._v(" 注意事项")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("选择合适的 JSON 数据类型")]),s._v("：\n"),t("ul",[t("li",[s._v("如果频繁查询、更新，优先选择 "),t("code",[s._v("JSONB")]),s._v("（如 PostgreSQL）。")]),s._v(" "),t("li",[s._v("如果仅存储少量 JSON 数据，"),t("code",[s._v("TEXT")]),s._v(" 类型可能更合适。")])])]),s._v(" "),t("li",[t("strong",[s._v("性能问题")]),s._v("：\n"),t("ul",[t("li",[s._v("JSON 查询性能可能低于传统的关系型表设计。")]),s._v(" "),t("li",[s._v("索引优化是关键，特别是对嵌套结构的访问。")])])]),s._v(" "),t("li",[t("strong",[s._v("数据验证")]),s._v("：\n"),t("ul",[t("li",[s._v("数据插入前需进行 JSON 格式验证（如使用 "),t("code",[s._v("IS JSON")]),s._v(" 检查）。")])])]),s._v(" "),t("li",[t("strong",[s._v("分离大字段")]),s._v("：\n"),t("ul",[t("li",[s._v("对于超大 JSON 数据，可以考虑单独拆表存储，提高主表性能。")])])])]),s._v(" "),t("h2",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),t("p",[s._v("JSON 数据类型扩展了关系型数据库的功能，能够灵活存储和操作半结构化数据。熟练掌握常用函数（如提取、更新、删除）以及索引优化技巧，可以显著提高处理 JSON 数据的效率。")]),s._v(" "),t("h2",{attrs:{id:"相关处理函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#相关处理函数"}},[s._v("#")]),s._v(" 相关处理函数")]),s._v(" "),t("p",[s._v("MySQL 提供了一些 json 类型的处理函数，包括：")]),s._v(" "),t("ol",[t("li",[t("code",[s._v("json_array()")]),s._v("：创建一个 json 数组。")]),s._v(" "),t("li",[s._v("json_object()：创建一个 json 对象。")]),s._v(" "),t("li",[s._v("json_insert()：将值插入到 json 文档中。")]),s._v(" "),t("li",[s._v("json_replace()：替换 json 文档中的值。")]),s._v(" "),t("li",[s._v("json_remove()：从 json 文档中删除值。")]),s._v(" "),t("li",[s._v("json_set()：在 json 文档中设置一个值。")]),s._v(" "),t("li",[t("code",[s._v("json_contains()")]),s._v("：如果 json 文档包含特定值，返回 1，否则返回 0。")]),s._v(" "),t("li",[s._v("json_contains_path()：如果 json 文档包含在指定路径上的数据，返回 1，否则返回 0。")]),s._v(" "),t("li",[t("code",[s._v("json_extract()")]),s._v(" 或 "),t("code",[s._v("->")]),s._v("：从 json 文档中提取一个值。（结果值会带有 "),t("code",[s._v("引号")]),s._v("）\n"),t("ul",[t("li",[t("code",[s._v("SELECT JSON_EXTRACT('{\"name\":\"John\"}', '$.name');")])]),s._v(" "),t("li",[t("code",[s._v("SELECT JSON_EXTRACT('{\"name\":\"John\"}', '$.name');")])]),s._v(" "),t("li",[s._v("获取结果为 "),t("code",[s._v('"John"')])])])]),s._v(" "),t("li",[t("code",[s._v("json_unquote()")]),s._v("：删除引号。\n"),t("ul",[t("li",[s._v("执行 "),t("code",[s._v("SELECT JSON_UNQUOTE('{\"name\":\"John\"}'->'$.name');")]),s._v(" 获取结果为 "),t("code",[s._v("John")])])])]),s._v(" "),t("li",[s._v("json_keys()：从 json 对象中抽取所有的键作为一个 json 数组。")]),s._v(" "),t("li",[s._v("json_length()：返回 json 文档中的元素个数。")]),s._v(" "),t("li",[s._v("json_depth()：返回 json 文档的最大深度。")]),s._v(" "),t("li",[t("code",[s._v("json_search()")]),s._v("：在 json 文档中搜索给定的字符串。")]),s._v(" "),t("li",[s._v("json_valid()：如果一个 json 字符串格式正确，则返回 1，否则返回 0。")]),s._v(" "),t("li",[s._v("json_type()：返回一个 json 值的类型，如对象、数组、字符串、数字等等。")])]),s._v(" "),t("p",[s._v("这些函数提供了对 json 的基本操作，如插入、替换、删除、设置和提取值等。你可以根据你的具体需求，选择使用这些函数。")])])}),[],!1,null,null,null);t.default=_.exports}}]);