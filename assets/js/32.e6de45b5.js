(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{364:function(t,s,a){"use strict";a.r(s);var v=a(1),e=Object(v.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"jstat-的应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jstat-的应用"}},[t._v("#")]),t._v(" jstat 的应用")]),t._v(" "),s("h2",{attrs:{id:"简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),s("p",[s("code",[t._v("jstat")]),t._v("（JVM Statistics Monitoring Tool）是 Java 提供的一个命令行工具，用于监视 JVM 的内存使用、垃圾回收（GC）情况等运行时统计信息。它可以帮助开发者分析和优化 Java 应用的性能。")]),t._v(" "),s("h2",{attrs:{id:"如何使用-jstat-查看-jvm-运行状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何使用-jstat-查看-jvm-运行状态"}},[t._v("#")]),t._v(" 如何使用 "),s("code",[t._v("jstat")]),t._v(" 查看 JVM 运行状态？")]),t._v(" "),s("p",[s("code",[t._v("jstat")]),t._v(" 主要用于监控 JVM 运行状态，一般格式如下：")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("jstat "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("pid"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("interval"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[s("strong",[s("code",[t._v("options")])]),t._v("：指定要查询的信息类型（如 GC、堆信息等）。")]),t._v(" "),s("li",[s("strong",[s("code",[t._v("pid")])]),t._v("：目标 Java 进程的 PID，可通过 "),s("code",[t._v("jps")]),t._v(" 命令获取。")]),t._v(" "),s("li",[s("strong",[s("code",[t._v("interval")])]),t._v("（可选）：时间间隔（毫秒），用于周期性监控。")]),t._v(" "),s("li",[s("strong",[s("code",[t._v("count")])]),t._v("（可选）：输出的次数。")])]),t._v(" "),s("h2",{attrs:{id:"常用-jstat-选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常用-jstat-选项"}},[t._v("#")]),t._v(" 常用 "),s("code",[t._v("jstat")]),t._v(" 选项")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("选项")]),t._v(" "),s("th",[t._v("作用")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("jstat -gc <pid>")])]),t._v(" "),s("td",[t._v("查看 GC 相关统计数据（包括新生代、老年代、Metaspace）")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("jstat -gcutil <pid>")])]),t._v(" "),s("td",[t._v("查看 GC 各个区域的利用率（百分比形式）")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("jstat -gccapacity <pid>")])]),t._v(" "),s("td",[t._v("显示 GC 各个内存区域的容量")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("jstat -class <pid>")])]),t._v(" "),s("td",[t._v("显示类加载相关信息")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("jstat -compiler <pid>")])]),t._v(" "),s("td",[t._v("显示 JIT 编译统计信息")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("jstat -printcompilation <pid>")])]),t._v(" "),s("td",[t._v("查看 JIT 编译的方法")])])])]),t._v(" "),s("h3",{attrs:{id:"示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("查看所有 Java 进程")])]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("jps\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("输出示例：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("1234 MyJavaApp\n5678 JConsole\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("这里 "),s("code",[t._v("1234")]),t._v(" 是 Java 进程的 PID。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("查看 GC 统计信息")])]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("jstat "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-gc")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1234")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("ul",[s("li",[s("code",[t._v("1234")]),t._v(" 是进程 ID")]),t._v(" "),s("li",[s("code",[t._v("1000")]),t._v(" 表示每秒采样一次")]),t._v(" "),s("li",[s("code",[t._v("10")]),t._v(" 表示采样 10 次")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("查看 GC 利用率")])]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("jstat "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-gcutil")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1234")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])])])]),t._v(" "),s("p",[t._v("如果你想具体分析应用的 GC 开销、对象分配情况，可以结合 "),s("code",[t._v("jstat -gc")]),t._v(" 和 "),s("code",[t._v("jstat -gcutil")]),t._v(" 监控，然后调整 JVM 参数进行优化。")]),t._v(" "),s("h2",{attrs:{id:"jstat-gc-输出字段解析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jstat-gc-输出字段解析"}},[t._v("#")]),t._v(" "),s("code",[t._v("jstat -gc")]),t._v(" 输出字段解析")]),t._v(" "),s("p",[s("code",[t._v("jstat -gc")]),t._v(" 输出中的 "),s("strong",[t._v("FGC")]),t._v(" 列表示 "),s("strong",[t._v("Full GC（完全垃圾回收）发生的次数")]),t._v("。当 Full GC 发生时，JVM 会清理整个堆（包括年轻代和老年代），通常会导致较长的 STW（Stop-The-World）暂停，因此 Full GC 过多通常意味着性能问题。")]),t._v(" "),s("p",[t._v("执行命令：")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("jstat "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-gc")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("pid"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("示例输出：")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v(" S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC      MU     CCSC   CCSU     YGC    YGCT    FGC   FGCT     GCT\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("512.0")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("512.0")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("64.0")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("173568.0")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("68832.5")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("349696.0")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("194931.1")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("44032.0")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("41197.8")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5888.0")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.152")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6.345")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6.497")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("其中：")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("S0C / S1C")]),t._v("：Survivor 0/1 区的容量（KB）。")]),t._v(" "),s("li",[s("strong",[t._v("S0U / S1U")]),t._v("：Survivor 0/1 区当前使用量（KB）。")]),t._v(" "),s("li",[s("strong",[t._v("EC / EU")]),t._v("：Eden 区的容量和使用量（KB）。")]),t._v(" "),s("li",[s("strong",[t._v("OC / OU")]),t._v("：老年代（Old Generation）的容量和使用量（KB）。")]),t._v(" "),s("li",[s("strong",[t._v("MC / MU")]),t._v("：方法区（Metaspace）的容量和使用量（KB）。")]),t._v(" "),s("li",[s("strong",[t._v("CCSC / CCSU")]),t._v("：压缩类空间的容量和使用量（KB）。")]),t._v(" "),s("li",[s("strong",[t._v("YGC")]),t._v("：Young GC（Minor GC）发生的次数。")]),t._v(" "),s("li",[s("strong",[t._v("YGCT")]),t._v("：Young GC 耗费的时间（秒）。")]),t._v(" "),s("li",[s("strong",[t._v("FGC")]),t._v("：Full GC 发生的次数。")]),t._v(" "),s("li",[s("strong",[t._v("FGCT")]),t._v("：Full GC 耗费的时间（秒）。")]),t._v(" "),s("li",[s("strong",[t._v("GCT")]),t._v("：GC 总耗时（YGCT + FGCT）。")])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"如何分析-fgc-的影响"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何分析-fgc-的影响"}},[t._v("#")]),t._v(" 如何分析 "),s("code",[t._v("FGC")]),t._v(" 的影响")]),t._v(" "),s("ul",[s("li",[t._v("如果 "),s("strong",[t._v("FGC 频繁增加")]),t._v("，并且 "),s("code",[t._v("FGCT")]),t._v("（Full GC 耗时）很高，说明 JVM 可能存在"),s("strong",[t._v("内存回收不及时、老年代溢出、对象晋升过快")]),t._v("等问题，可能需要调整堆大小、GC 策略或代码优化。")]),t._v(" "),s("li",[t._v("如果 "),s("strong",[t._v("YGC 远高于 FGC")]),t._v("，说明年轻代回收频繁，但 Full GC 仍然不多，通常是正常现象。")]),t._v(" "),s("li",[s("strong",[s("code",[t._v("GCT")]),t._v("（GC 总耗时）占比过高")]),t._v("，可能说明 GC 对应用性能影响较大，需要优化。")])]),t._v(" "),s("hr"),t._v(" "),s("h3",{attrs:{id:"优化建议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#优化建议"}},[t._v("#")]),t._v(" 优化建议")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("减少 Full GC 触发频率")])]),t._v(" "),s("ul",[s("li",[t._v("增大 "),s("code",[t._v("-Xmx")]),t._v(" 和 "),s("code",[t._v("-Xms")]),t._v("（堆大小）。")]),t._v(" "),s("li",[t._v("使用 G1 GC ("),s("code",[t._v("-XX:+UseG1GC")]),t._v(")，减少 Full GC 影响。")]),t._v(" "),s("li",[t._v("限制 "),s("code",[t._v("Metaspace")]),t._v(" 大小，避免 "),s("code",[t._v("OutOfMemoryError")]),t._v(" 触发 Full GC。")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("优化对象分配")])]),t._v(" "),s("ul",[s("li",[t._v("减少大对象直接进入老年代（调整 "),s("code",[t._v("-XX:PretenureSizeThreshold")]),t._v("）。")]),t._v(" "),s("li",[t._v("提高新生代比例，减少对象过快晋升（"),s("code",[t._v("-Xmn")]),t._v("，"),s("code",[t._v("-XX:SurvivorRatio")]),t._v("）。")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("监控 GC 详细日志")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("启用 GC 日志分析：")]),t._v(" "),s("div",{staticClass:"language-sh line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("java")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-XX:+PrintGCDetails")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-XX:+PrintGCDateStamps")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-Xloggc:gc.log")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-jar")]),t._v(" yourapp.jar\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("使用 "),s("code",[t._v("jstat -gcutil <pid> 1000")]),t._v(" 实时查看 GC 影响。")])])])])]),t._v(" "),s("hr"),t._v(" "),s("p",[s("strong",[t._v("总结")]),t._v("：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("FGC")]),t._v(" 代表 Full GC 次数，过高可能导致性能下降。")]),t._v(" "),s("li",[t._v("结合 "),s("code",[t._v("YGCT")]),t._v("、"),s("code",[t._v("FGCT")]),t._v(" 和 "),s("code",[t._v("GCT")]),t._v(" 分析 GC 对应用的影响。")]),t._v(" "),s("li",[t._v("通过 GC 调优（增大堆、调整 GC 策略、优化对象分配）来减少 Full GC 发生的频率。")])]),t._v(" "),s("h2",{attrs:{id:"学习参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#学习参考"}},[t._v("#")]),t._v(" 学习参考")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/515185667",target:"_blank",rel:"noopener noreferrer"}},[t._v("jvm 性能调优工具之 jstat 命令详解 - 知乎"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://blog.csdn.net/achuo/article/details/107793361",target:"_blank",rel:"noopener noreferrer"}},[t._v("【JVM】jstat命令详解---JVM的统计监测工具-CSDN博客"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);